# Plant-DTP ç§»åŠ¨ç«¯å¼€å‘è§„åˆ’

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **åˆ›å»ºæ—¥æœŸ**: 2026-01-29
> **ç»´æŠ¤è€…**: Plant-DTP Team

---

## ğŸ“‘ ç›®å½•

- [ä¸€ã€é¡¹ç›®ç°çŠ¶åˆ†æ](#ä¸€é¡¹ç›®ç°çŠ¶åˆ†æ)
- [äºŒã€ç§»åŠ¨ç«¯éƒ¨ç½²æ–¹æ¡ˆè°ƒç ”](#äºŒç§»åŠ¨ç«¯éƒ¨ç½²æ–¹æ¡ˆè°ƒç ”)
- [ä¸‰ã€æŠ€æœ¯é€‰å‹å»ºè®®](#ä¸‰æŠ€æœ¯é€‰å‹å»ºè®®)
- [å››ã€ç§»åŠ¨ç«¯å¼€å‘è®¡åˆ’](#å››ç§»åŠ¨ç«¯å¼€å‘è®¡åˆ’)
- [äº”ã€PWA å®æ–½æ–¹æ¡ˆ](#äº”pwa-å®æ–½æ–¹æ¡ˆ)
- [å…­ã€å“åº”å¼ä¼˜åŒ–æ–¹æ¡ˆ](#å…­å“åº”å¼ä¼˜åŒ–æ–¹æ¡ˆ)
- [ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#ä¸ƒæ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
- [å…«ã€æµ‹è¯•ä¸éƒ¨ç½²](#å…«æµ‹è¯•ä¸éƒ¨ç½²)
- [ä¹ã€æˆæœ¬ä¸æ—¶é—´ä¼°ç®—](#ä¹æˆæœ¬ä¸æ—¶é—´ä¼°ç®—)
- [åã€é£é™©ä¸åº”å¯¹](#åé£é™©ä¸åº”å¯¹)

---

## ä¸€ã€é¡¹ç›®ç°çŠ¶åˆ†æ

### 1.1 å½“å‰æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯æ ˆ
```json
{
  "æ¡†æ¶": "React 18.3 + TypeScript 5.4",
  "æ„å»ºå·¥å…·": "Vite 5.2",
  "UIç»„ä»¶åº“": "Ant Design 5.15",
  "æ ·å¼æ–¹æ¡ˆ": "TailwindCSS 3.4",
  "è·¯ç”±": "React Router 6.22",
  "çŠ¶æ€ç®¡ç†": "Zustand 4.5",
  "æ•°æ®è·å–": "@tanstack/react-query 5.28",
  "è¡¨å•": "React Hook Form + Zod"
}
```

#### åç«¯æŠ€æœ¯æ ˆ
```json
{
  "è¿è¡Œæ—¶": "Python 3.11+",
  "æ¡†æ¶": "FastAPI",
  "æ•°æ®åº“": "PostgreSQL (ç«¯å£12803)",
  "å›¾ç‰‡å¤„ç†": "Pillow"
}
```

### 1.2 ç§»åŠ¨ç«¯é€‚é…ç°çŠ¶

#### âœ… å·²æœ‰åŸºç¡€
- **TailwindCSS**: å·²é›†æˆï¼Œæä¾›å¼ºå¤§çš„å“åº”å¼å·¥å…·ç±»
- **Vite 5**: ç°ä»£æ„å»ºå·¥å…·ï¼Œæ”¯æŒPWAæ’ä»¶
- **Ant Design**: æä¾›éƒ¨åˆ†ç§»åŠ¨ç«¯é€‚é…æ”¯æŒ

#### âš ï¸ å¾…æ”¹è¿›
- âŒ **æœªé…ç½®PWA**: æ— manifest.jsonã€Service Worker
- âŒ **ç§»åŠ¨ç«¯ä¸“ç”¨UIç»„ä»¶**: æœªä½¿ç”¨Ant Design Mobile
- âŒ **å“åº”å¼æ–­ç‚¹**: æœªç³»ç»ŸåŒ–è®¾è®¡æ–­ç‚¹ç­–ç•¥
- âŒ **è§¦æ‘¸ä¼˜åŒ–**: ç¼ºå°‘ç§»åŠ¨ç«¯æ‰‹åŠ¿äº¤äº’ä¼˜åŒ–
- âŒ **æ€§èƒ½ä¼˜åŒ–**: å›¾ç‰‡æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²ç­‰æœªå……åˆ†å®æ–½

### 1.3 å½“å‰é¡µé¢ç»“æ„

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Dashboard.tsx       # ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ Plants.tsx          # æ¤ç‰©åˆ—è¡¨
â”‚   â”œâ”€â”€ Rooms.tsx           # æˆ¿é—´åˆ—è¡¨
â”‚   â”œâ”€â”€ Tasks.tsx           # ä»»åŠ¡åˆ—è¡¨
â”‚   â””â”€â”€ Settings.tsx        # è®¾ç½®é¡µé¢
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ plant/              # æ¤ç‰©ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ room/               # æˆ¿é—´ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ task/               # ä»»åŠ¡ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â””â”€â”€ hooks/                  # è‡ªå®šä¹‰Hooks
```

---

## äºŒã€ç§»åŠ¨ç«¯éƒ¨ç½²æ–¹æ¡ˆè°ƒç ”

### 2.1 ä¸‰å¤§æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | **PWA** | **å“åº”å¼Web** | **å°ç¨‹åº** |
|------|---------|-------------|-----------|
| **å¼€å‘æˆæœ¬** | â­â­â­ ä¸­ç­‰ | â­â­ æœ€ä½ | â­â­â­â­ è¾ƒé«˜ |
| **è·¨å¹³å°æ€§** | â­â­â­â­â­ iOS+Android+æ¡Œé¢ | â­â­â­â­â­ æ‰€æœ‰å¹³å° | â­â­ ä»…é™å¾®ä¿¡ç­‰å¹³å° |
| **ç”¨æˆ·ä½“éªŒ** | â­â­â­â­ æ¥è¿‘åŸç”Ÿ | â­â­â­ æ™®é€šWeb | â­â­â­â­â­ åŸç”Ÿçº§ |
| **å®‰è£…é—¨æ§›** | â­â­â­â­â­ å¯æ·»åŠ åˆ°ä¸»å±å¹• | â­â­â­â­â­ æ— éœ€å®‰è£… | â­â­â­ éœ€æœç´¢æ‰“å¼€ |
| **ç¦»çº¿èƒ½åŠ›** | â­â­â­â­â­ Service Worker | â­â­ æœ‰é™ç¼“å­˜ | â­â­â­â­ å®Œæ•´æ”¯æŒ |
| **æ¨é€é€šçŸ¥** | â­â­â­ æ”¯æŒ(iOSå—é™) | âŒ ä¸æ”¯æŒ | â­â­â­â­â­ å¼ºåŠ›æ”¯æŒ |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­ ä½ | â­â­â­â­â­ æœ€ä½ | â­â­â­ ä¸­ç­‰ |
| **å®¡æ ¸æµç¨‹** | â­â­â­â­â­ æ— éœ€å®¡æ ¸ | â­â­â­â­â­ æ— éœ€å®¡æ ¸ | â­ éœ€å¹³å°å®¡æ ¸ |
| **åˆ†äº«ä¼ æ’­** | â­â­â­â­ URLåˆ†äº« | â­â­â­â­â­ URLç›´æ¥è®¿é—® | â­â­â­ å°ç¨‹åºç /é“¾æ¥ |
| **SEOå‹å¥½** | â­â­â­â­â­ å¯è¢«ç´¢å¼• | â­â­â­â­â­ å¯è¢«ç´¢å¼• | â­â­ æœ‰é™æ”¯æŒ |

### 2.2 æ–¹æ¡ˆè¯¦ç»†åˆ†æ

#### ğŸ“± æ–¹æ¡ˆA: PWA (Progressive Web App)

**æŠ€æœ¯åŸç†ï¼š**
- Service Worker: ç¦»çº¿ç¼“å­˜ã€åå°åŒæ­¥
- Manifest.json: åº”ç”¨å…ƒæ•°æ®ã€å›¾æ ‡é…ç½®
- HTTPS: å®‰å…¨è¦æ±‚
- Responsive Design: å“åº”å¼é€‚é…

**ä¼˜åŠ¿ï¼š**
```typescript
// 1. å¯å®‰è£…åˆ°ä¸»å±å¹•
// ç”¨æˆ·å¯ä»¥"å®‰è£…"åº”ç”¨ï¼Œè·å¾—ç±»ä¼¼åŸç”Ÿçš„ä½“éªŒ

// 2. ç¦»çº¿å·¥ä½œèƒ½åŠ›
// Service Worker ç¼“å­˜å…³é”®èµ„æº
// - é¦–å±HTML/CSS/JS
// - APIå“åº”æ•°æ®
// - é™æ€èµ„æº(å›¾ç‰‡ã€å­—ä½“)

// 3. æ¨é€é€šçŸ¥
// å¯å‘é€æœ¬åœ°é€šçŸ¥(éœ€è¦ç”¨æˆ·æˆæƒ)

// 4. è‡ªåŠ¨æ›´æ–°
// æ— éœ€ç”¨æˆ·æ‰‹åŠ¨æ›´æ–°åº”ç”¨å•†åº—

// 5. è·¨å¹³å°ç»Ÿä¸€
// ä¸€å¥—ä»£ç è¦†ç›– iOSã€Androidã€æ¡Œé¢
```

**å±€é™æ€§ï¼š**
```typescript
// 1. iOS Safari æ”¯æŒæœ‰é™
// - æ¨é€é€šçŸ¥ä¸æ”¯æŒ
// - åå°åŒæ­¥æœ‰é™åˆ¶
// - å­˜å‚¨å®¹é‡é™åˆ¶(50MB)

// 2. åŸç”Ÿèƒ½åŠ›å—é™
// - æ— æ³•è®¿é—®NFCã€è“ç‰™
// - ç›¸æœºã€éº¦å…‹é£æƒé™å—é™

// 3. å›½å†…ç”¨æˆ·ä¹ æƒ¯
// - å›½å†…ç”¨æˆ·æ›´ä¹ æƒ¯å°ç¨‹åº
// - éœ€è¦å¼•å¯¼ç”¨æˆ·"æ·»åŠ åˆ°ä¸»å±å¹•"
```

**é€‚ç”¨åœºæ™¯ï¼š**
```
âœ… é¢å‘æµ·å¤–å¸‚åœº
âœ… å·¥å…·ç±»åº”ç”¨(å¦‚Plant-DTP)
âœ… éœ€è¦å¿«é€Ÿè¿­ä»£
âœ… é¢„ç®—æœ‰é™çš„ä¸ªäººé¡¹ç›®
âœ… å¸Œæœ›é¿å¼€åº”ç”¨å•†åº—å®¡æ ¸
```

---

#### ğŸŒ æ–¹æ¡ˆB: å“åº”å¼ Web App

**æŠ€æœ¯åŸç†ï¼š**
- Media Queries: CSSåª’ä½“æŸ¥è¯¢
- Flexible Layout: å¼¹æ€§å¸ƒå±€
- Mobile-first: ç§»åŠ¨ä¼˜å…ˆè®¾è®¡

**ä¼˜åŠ¿ï¼š**
```typescript
// 1. å¼€å‘æˆæœ¬æœ€ä½
// åªéœ€ç»´æŠ¤ä¸€å¥—ä»£ç 

// 2. å…¼å®¹æ€§æœ€å¥½
// æ‰€æœ‰ç°ä»£æµè§ˆå™¨å‡æ”¯æŒ

// 3. æ›´æ–°æœ€ä¾¿æ·
// æœåŠ¡å™¨ç«¯æ›´æ–°å³æ—¶ç”Ÿæ•ˆ

// 4. SEOå‹å¥½
// å®Œå…¨å¯è¢«æœç´¢å¼•æ“ç´¢å¼•

// 5. æ— å¹³å°é™åˆ¶
// ä¸å—ä»»ä½•å¹³å°æ”¿ç­–çº¦æŸ
```

**å±€é™æ€§ï¼š**
```typescript
// 1. ç”¨æˆ·ä½“éªŒè¾ƒå·®
// - æµè§ˆå™¨åœ°å€æ ã€å¯¼èˆªæ å ç”¨ç©ºé—´
// - æ— æ³•å…¨å±æ˜¾ç¤º
// - è¿”å›é”®è¡Œä¸ºä¸åŸç”Ÿä¸åŒ

// 2. æ— ç¦»çº¿èƒ½åŠ›
// ç½‘ç»œæ–­å¼€åæ— æ³•è®¿é—®

// 3. æ— æ¨é€é€šçŸ¥
// æ— æ³•ä¸»åŠ¨è§¦è¾¾ç”¨æˆ·

// 4. æ€§èƒ½ç›¸å¯¹è¾ƒä½
// å—æµè§ˆå™¨æ€§èƒ½é™åˆ¶
```

**é€‚ç”¨åœºæ™¯ï¼š**
```
âœ… MVPå¿«é€ŸéªŒè¯
âœ… ä¼ä¸šå®˜ç½‘ã€äº§å“å±•ç¤º
âœ… åŠŸèƒ½ç®€å•çš„å·¥å…·ç±»äº§å“
âœ… ä¸»è¦é€šè¿‡SEOè·å–æµé‡
âœ… é¢„ç®—æåº¦æœ‰é™çš„é¡¹ç›®
```

---

#### ğŸ“² æ–¹æ¡ˆC: å¾®ä¿¡å°ç¨‹åº

**æŠ€æœ¯åŸç†ï¼š**
- å¾®ä¿¡å®šåˆ¶æ¡†æ¶
- WXML + WXSS + JS
- å¾®ä¿¡åŸç”ŸAPI

**ä¼˜åŠ¿ï¼š**
```typescript
// 1. å·¨å¤§ç”¨æˆ·åŸºæ•°
// å¾®ä¿¡æœˆæ´»è¶…13äº¿(2025æ•°æ®)

// 2. åŸç”Ÿçº§ä½“éªŒ
// - æµç•…çš„åŠ¨ç”»
// - åŸç”Ÿç»„ä»¶
// - å®Œæ•´çš„æƒé™ç®¡ç†

// 3. ç¤¾äº¤ä¼ æ’­
// - åˆ†äº«åˆ°æœ‹å‹åœˆã€ç¾¤èŠ
// - è£‚å˜è¥é”€èƒ½åŠ›å¼º
// - å°ç¨‹åºç å¿«é€Ÿä¼ æ’­

// 4. æ”¯ä»˜é›†æˆ
// å¾®ä¿¡æ”¯ä»˜æ·±åº¦é›†æˆ

// 5. è·å–æˆæœ¬ä½
// æ— éœ€ä¸‹è½½å®‰è£…
```

**å±€é™æ€§ï¼š**
```typescript
// 1. å¹³å°å„æ–­
// - å—é™äºå¾®ä¿¡æ”¿ç­–
// - å¯èƒ½è¢«éšæ„å°ç¦
// - å®¡æ ¸æ ‡å‡†ä¸é€æ˜

// 2. å®¡æ ¸ä¸¥æ ¼
// - ä¸Šçº¿éœ€å®¡æ ¸
// - åŠŸèƒ½é™åˆ¶(å¦‚AIã€è™šæ‹Ÿè´§å¸)
// - ç±»ç›®é™åˆ¶

// 3. åŠŸèƒ½å—é™
// - åŒ…ä½“ç§¯é™åˆ¶(20MB)
// - APIé™åˆ¶
// - è·³è½¬é™åˆ¶

// 4. å‡ºæµ·å›°éš¾
// ä¸»è¦åœ¨å›½å†…ä½¿ç”¨

// 5. å¤šç«¯æˆæœ¬é«˜
// å¾®ä¿¡ã€æ”¯ä»˜å®ã€æŠ–éŸ³éœ€åˆ†åˆ«å¼€å‘
```

**é€‚ç”¨åœºæ™¯ï¼š**
```
âœ… ç”µå•†é›¶å”®
âœ… ç”Ÿæ´»æœåŠ¡(å¤–å–ã€å‡ºè¡Œ)
âœ… ç¤¾äº¤ç”µå•†
âœ… ä¾æ‰˜å¾®ä¿¡ç”Ÿæ€çš„äº§å“
âœ… Bç«¯ä¼ä¸šåº”ç”¨(OAã€CRM)
```

### 2.3 2025å¹´æŠ€æœ¯è¶‹åŠ¿

æ ¹æ®æœ€æ–°è°ƒç ”([æ¥æº](https://blog.csdn.net/JafarOne/article/details/146469093))ï¼š

```typescript
// 1. è½»é‡åŒ–è¶‹åŠ¿
// - æ¡†æ¶ä½“ç§¯æŒç»­ä¼˜åŒ–
// - Tree-shakingæ›´åŠ æˆç†Ÿ
// - æŒ‰éœ€åŠ è½½æˆä¸ºæ ‡é…

// 2. AIèåˆ
// - AIåŠŸèƒ½é›†æˆ
// - æ™ºèƒ½æ¨è
// - å›¾åƒè¯†åˆ«

// 3. æ··åˆå¼€å‘
// - PWA + åŸç”Ÿæ··åˆ
// - ä½ä»£ç å¹³å°
// - è·¨å¹³å°æ¡†æ¶æˆç†Ÿ

// 4. æ€§èƒ½ä¼˜åŒ–
// - Vulkanæ”¯æŒ(Android)
// - ç¦»å±æ¸²æŸ“
// - è™šæ‹Ÿåˆ—è¡¨
```

---

## ä¸‰ã€æŠ€æœ¯é€‰å‹å»ºè®®

### 3.1 Plant-DTP æœ€ä½³æ–¹æ¡ˆ

**æ¨è: å“åº”å¼ Web App â†’ PWA æ¸è¿›å¼å‡çº§**

#### æ–¹æ¡ˆä¼˜åŠ¿
```typescript
// é˜¶æ®µ1: å“åº”å¼Web App (å¿«é€Ÿä¸Šçº¿)
- å¼€å‘å‘¨æœŸ: 1-2å‘¨
- æˆæœ¬: æœ€ä½
- é£é™©: æœ€å°

// é˜¶æ®µ2: PWAå‡çº§ (ä½“éªŒæå‡)
- å¼€å‘å‘¨æœŸ: 1-2å‘¨
- æˆæœ¬: ä½
- æ•ˆæœ: æ¥è¿‘åŸç”Ÿä½“éªŒ
```

#### ä¸ºä»€ä¹ˆä¸é€‰å°ç¨‹åºï¼Ÿ
```
âŒ Plant-DTPæ˜¯å·¥å…·ç±»åº”ç”¨ï¼Œä¸éœ€è¦ç¤¾äº¤æµé‡
âŒ å·²æœ‰å®Œæ•´çš„WebæŠ€æœ¯æ ˆï¼Œè¿ç§»æˆæœ¬é«˜
âŒ å—é™äºå¾®ä¿¡æ”¿ç­–ï¼Œå‡ºæµ·å›°éš¾
âŒ ç”¨æˆ·ç²˜æ€§ä¸»è¦é åŠŸèƒ½ï¼Œä¸æ˜¯é å¹³å°
âœ… å“åº”å¼+PWAå¯è¦†ç›–æ‰€æœ‰è®¾å¤‡
```

### 3.2 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å“åº”å¼ Web App (åŸºç¡€å±‚)            â”‚
â”‚                                              â”‚
â”‚  React 18 + TailwindCSS + Ant Design        â”‚
â”‚  ç§»åŠ¨ä¼˜å…ˆè®¾è®¡ + å“åº”å¼æ–­ç‚¹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PWA å¢å¼ºå±‚ (å¯é€‰)                 â”‚
â”‚                                              â”‚
â”‚  Vite PWA Plugin                            â”‚
â”‚  - Manifest.json (åº”ç”¨é…ç½®)                 â”‚
â”‚  - Service Worker (ç¦»çº¿ç¼“å­˜)                â”‚
â”‚  - Push API (æ¨é€é€šçŸ¥)                      â”‚
â”‚  - Badge API (è§’æ ‡æé†’)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ä¸ç°æœ‰å°ç¨‹åºè§„åˆ’çš„å…³ç³»

é¡¹ç›®ä¸­å·²æœ‰ `09-å¾®ä¿¡å°ç¨‹åºé›†æˆè§„åˆ’.md`ï¼Œå»ºè®®ï¼š

```typescript
// çŸ­æœŸæ–¹æ¡ˆ (1-2ä¸ªæœˆ)
âœ… å“åº”å¼Web App + PWA
âœ… å¿«é€Ÿä¸Šçº¿ï¼Œè¦†ç›–æ‰€æœ‰å¹³å°
âœ… å¼€å‘æˆæœ¬ä½ï¼Œè¿­ä»£å¿«

// ä¸­æœŸæ–¹æ¡ˆ (3-6ä¸ªæœˆ)
âœ… å¦‚æœå¾®ä¿¡ç”Ÿæ€æµé‡é‡è¦
âœ… å¯é€‰æ‹©æ€§å¼€å‘å¾®ä¿¡å°ç¨‹åº
âœ… å¤ç”¨åç«¯API

// é•¿æœŸç­–ç•¥
âœ… æ ¸å¿ƒåŠŸèƒ½: Web App + PWA
âœ… æµé‡å…¥å£: å°ç¨‹åº(å¯é€‰)
âœ… æ•°æ®åŒæ­¥: ç»Ÿä¸€åç«¯API
```

---

## å››ã€ç§»åŠ¨ç«¯å¼€å‘è®¡åˆ’

### 4.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

#### ğŸ“± é˜¶æ®µä¸€: å“åº”å¼é€‚é… (ä¼˜å…ˆçº§: P0)

**ç›®æ ‡**: å®ç°å®Œæ•´çš„ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€

**å·¥æœŸ**: 1-2å‘¨

**ä»»åŠ¡æ¸…å•**:
```typescript
Week 1: åŸºç¡€è®¾æ–½
âœ… Day 1-2: é…ç½®å“åº”å¼æ–­ç‚¹ç³»ç»Ÿ
  - å®šä¹‰æ–­ç‚¹ (sm/md/lg/xl)
  - é…ç½®Tailwindå“åº”å¼å·¥å…·
  - è®¾ç½®è§†å£metaæ ‡ç­¾

âœ… Day 3-4: å¸ƒå±€ç»„ä»¶é€‚é…
  - MainLayout å“åº”å¼æ”¹é€ 
  - Header ç§»åŠ¨ç«¯é€‚é…(æ±‰å ¡èœå•)
  - Sidebar ç§»åŠ¨ç«¯æŠ½å±‰å¼
  - Footer ç®€åŒ–

âœ… Day 5-7: æ ¸å¿ƒé¡µé¢é€‚é…
  - Dashboard ç§»åŠ¨ç«¯å¸ƒå±€
  - Plants åˆ—è¡¨å“åº”å¼
  - Tasks åˆ—è¡¨å“åº”å¼
  - Rooms åˆ—è¡¨å“åº”å¼

Week 2: ç»„ä»¶ä¸äº¤äº’
âœ… Day 8-10: ç»„ä»¶ç§»åŠ¨ç«¯ä¼˜åŒ–
  - PlantCard ç§»åŠ¨ç«¯æ ·å¼
  - TaskItem è§¦æ‘¸ä¼˜åŒ–
  - Form ç§»åŠ¨ç«¯è¡¨å•
  - Modal å…¨å±é€‚é…

âœ… Day 11-12: æ‰‹åŠ¿äº¤äº’
  - ä¸‹æ‹‰åˆ·æ–°
  - ä¾§æ»‘æ“ä½œ
  - é•¿æŒ‰èœå•
  - è§¦æ‘¸åé¦ˆ

âœ… Day 13-14: æµ‹è¯•ä¸ä¿®å¤
  - çœŸæœºæµ‹è¯•
  - æ€§èƒ½æµ‹è¯•
  - Bugä¿®å¤
```

---

#### âš¡ é˜¶æ®µäºŒ: PWA å‡çº§ (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: æ·»åŠ PWAèƒ½åŠ›ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**å·¥æœŸ**: 1-2å‘¨

**ä»»åŠ¡æ¸…å•**:
```typescript
Week 1: PWA åŸºç¡€è®¾æ–½
âœ… Day 1-2: Vite PWA æ’ä»¶é…ç½®
  - å®‰è£… vite-plugin-pwa
  - é…ç½® manifest.json
  - ç”Ÿæˆåº”ç”¨å›¾æ ‡(å¤šç§å°ºå¯¸)

âœ… Day 3-4: Service Worker é…ç½®
  - ç¼“å­˜ç­–ç•¥é…ç½®
  - é¢„ç¼“å­˜å…³é”®èµ„æº
  - åŠ¨æ€ç¼“å­˜APIæ•°æ®

âœ… Day 5-7: ç¦»çº¿åŠŸèƒ½
  - ç¦»çº¿é¡µé¢æç¤º
  - ç¦»çº¿æ•°æ®é˜Ÿåˆ—
  - ç½‘ç»œæ¢å¤åŒæ­¥

Week 2: PWA é«˜çº§åŠŸèƒ½
âœ… Day 8-9: å®‰è£…å¼•å¯¼
  - å®‰è£…æç¤ºç»„ä»¶
  - è‡ªå®šä¹‰å®‰è£…UI
  - å®‰è£…åå¼•å¯¼

âœ… Day 10-11: æ¨é€é€šçŸ¥(å¯é€‰)
  - é€šçŸ¥æƒé™è¯·æ±‚
  - ä»»åŠ¡æé†’é€šçŸ¥
  - é€šçŸ¥ç‚¹å‡»å¤„ç†

âœ… Day 12-14: æµ‹è¯•ä¸ä¼˜åŒ–
  - å®‰è£…æµ‹è¯•(ios/Android)
  - ç¦»çº¿åŠŸèƒ½æµ‹è¯•
  - æ€§èƒ½ä¼˜åŒ–
```

---

#### ğŸš€ é˜¶æ®µä¸‰: æ€§èƒ½ä¼˜åŒ– (ä¼˜å…ˆçº§: P2)

**ç›®æ ‡**: ä¼˜åŒ–åŠ è½½é€Ÿåº¦å’Œäº¤äº’æ€§èƒ½

**å·¥æœŸ**: 1å‘¨

**ä»»åŠ¡æ¸…å•**:
```typescript
âœ… å›¾ç‰‡ä¼˜åŒ–
  - å›¾ç‰‡æ‡’åŠ è½½
  - å“åº”å¼å›¾ç‰‡(srcset)
  - WebPæ ¼å¼è½¬æ¢
  - ç¼©ç•¥å›¾ä¼˜åŒ–(å·²æœ‰)

âœ… ä»£ç ä¼˜åŒ–
  - è·¯ç”±æ‡’åŠ è½½
  - ç»„ä»¶ä»£ç åˆ†å‰²
  - Tree-shakingä¼˜åŒ–

âœ… ç¼“å­˜ç­–ç•¥
  - HTTPç¼“å­˜å¤´é…ç½®
  - LocalStorageç¼“å­˜
  - React Queryç¼“å­˜é…ç½®

âœ… æ€§èƒ½ç›‘æ§
  - Core Web Vitalsç›‘æµ‹
  - é”™è¯¯è¿½è¸ª
  - æ€§èƒ½åˆ†æ
```

---

### 4.2 å“åº”å¼æ–­ç‚¹è®¾è®¡

```css
/* TailwindCSS é»˜è®¤æ–­ç‚¹ */
sm:   '640px',   /* æ‰‹æœºæ¨ªå±å°å¹³æ¿ */
md:   '768px',   /* å¹³æ¿ç«–å± */
lg:   '1024px',  /* å¹³æ¿æ¨ªå±å°ç¬”è®°æœ¬ */
xl:   '1280px',  /* æ¡Œé¢ */
2xl:  '1536px',  /* å¤§å±æ¡Œé¢ */

/* Plant-DTP è‡ªå®šä¹‰æ–­ç‚¹å»ºè®® */
mobile:   '320px',   /* å°å±æ‰‹æœº */
mobile-m: '375px',   /* æ ‡å‡†æ‰‹æœº(iPhone SE) */
mobile-l: '414px',   /* å¤§å±æ‰‹æœº(iPhone Pro Max) */
tablet:   '768px',   /* å¹³æ¿ */
desktop:  '1024px',  /* æ¡Œé¢ */
```

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
// Tailwind CSS
<div className="
  grid
  grid-cols-1           /* ç§»åŠ¨ç«¯: 1åˆ— */
  sm:grid-cols-2        /* å°å±: 2åˆ— */
  md:grid-cols-3        /* å¹³æ¿: 3åˆ— */
  lg:grid-cols-4        /* æ¡Œé¢: 4åˆ— */
  gap-4
">
  {/* æ¤ç‰©å¡ç‰‡ */}
</div>

// éšè—/æ˜¾ç¤ºå…ƒç´ 
<div className="hidden md:block">
  {/* ä»…åœ¨æ¡Œé¢ç«¯æ˜¾ç¤º */}
</div>

<div className="block md:hidden">
  {/* ä»…åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º */}
</div>
```

---

### 4.3 ç§»åŠ¨ç«¯UIè®¾è®¡åŸåˆ™

```typescript
// 1. è§¦æ‘¸å‹å¥½
- æœ€å°è§¦æ‘¸ç›®æ ‡: 44x44px (iOSæ ‡å‡†)
- æŒ‰é’®é—´è·: è‡³å°‘8px
- é¿å…è¯¯è§¦: é‡è¦æ“ä½œéœ€è¦ç¡®è®¤

// 2. å¸ƒå±€ç®€æ´
- å•åˆ—å¸ƒå±€ä¸ºä¸»
- å‡å°‘å±‚çº§åµŒå¥—
- ä¿¡æ¯å¯†åº¦é€‚ä¸­

// 3. å¯¼èˆªä¼˜åŒ–
- åº•éƒ¨Tabå¯¼èˆª(ä¸»è¦åŠŸèƒ½)
- æ±‰å ¡èœå•(æ¬¡è¦åŠŸèƒ½)
- è¿”å›æŒ‰é’®(å±‚çº§å¯¼èˆª)

// 4. è¡¨å•ä¼˜åŒ–
- å¤§å·è¾“å…¥æ¡†
- æ¸…æ™°çš„é”™è¯¯æç¤º
- è‡ªåŠ¨èšç„¦ä¸‹ä¸€ä¸ªè¾“å…¥
- é”®ç›˜ç±»å‹é€‚é…

// 5. æ€§èƒ½ä¼˜å…ˆ
- é¦–å±< 3ç§’
- äº¤äº’å“åº”< 100ms
- æ»šåŠ¨å¸§ç‡> 60fps
```

---

## äº”ã€PWA å®æ–½æ–¹æ¡ˆ

### 5.1 Vite PWA æ’ä»¶é…ç½®

#### å®‰è£…ä¾èµ–
```bash
npm install -D vite-plugin-pwa
# æˆ–
yarn add -D vite-plugin-pwa
# æˆ–
pnpm add -D vite-plugin-pwa
```

#### é…ç½® vite.config.ts
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { VitePWA } from 'vite-plugin-pwa'
import path from 'path'

export default defineConfig({
  plugins: [
    react(),
    VitePWA({
      registerType: 'autoUpdate', // è‡ªåŠ¨æ›´æ–°

      includeAssets: [
        'favicon.ico',
        'robots.txt',
        'apple-touch-icon.png'
      ],

      manifest: {
        // åº”ç”¨åŸºç¡€ä¿¡æ¯
        name: 'Plant-DTP æ¤ç‰©ç®¡å®¶',
        short_name: 'æ¤ç‰©ç®¡å®¶',
        description: 'æ™ºèƒ½æ¤ç‰©å…»æŠ¤ç®¡ç†å¹³å°',

        // è§†è§‰é…ç½®
        theme_color: '#1890ff',
        background_color: '#ffffff',

        // æ˜¾ç¤ºæ¨¡å¼
        display: 'standalone', // å…¨å±æ˜¾ç¤ºï¼Œæ— æµè§ˆå™¨UI
        orientation: 'portrait', // ç«–å±ä¼˜å…ˆ

        // å›¾æ ‡é…ç½®
        icons: [
          {
            src: 'pwa-icons/icon-72x72.png',
            sizes: '72x72',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-96x96.png',
            sizes: '96x96',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-128x128.png',
            sizes: '128x128',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-144x144.png',
            sizes: '144x144',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-152x152.png',
            sizes: '152x152',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-192x192.png',
            sizes: '192x192',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-384x384.png',
            sizes: '384x384',
            type: 'image/png',
            purpose: 'maskable any'
          },
          {
            src: 'pwa-icons/icon-512x512.png',
            sizes: '512x512',
            type: 'image/png',
            purpose: 'maskable any'
          }
        ],

        // å¯åŠ¨URL
        start_url: '/',

        // ä½œç”¨åŸŸ
        scope: '/'
      },

      // Service Worker é…ç½®
      workbox: {
        // ç¼“å­˜ç­–ç•¥
        runtimeCaching: [
          {
            // API è¯·æ±‚ç¼“å­˜
            urlPattern: /^https:\/\/.*\/api\/.*/,
            handler: 'NetworkFirst', // ä¼˜å…ˆç½‘ç»œï¼Œå¤±è´¥åˆ™ç¼“å­˜
            options: {
              cacheName: 'api-cache',
              expiration: {
                maxEntries: 100,
                maxAgeSeconds: 60 * 60 * 24 // 24å°æ—¶
              },
              cacheableResponse: {
                statuses: [0, 200]
              }
            }
          },
          {
            // å›¾ç‰‡ç¼“å­˜
            urlPattern: /^https:\/\/.*\.(?:png|jpg|jpeg|svg|gif|webp)$/,
            handler: 'CacheFirst', // ä¼˜å…ˆç¼“å­˜
            options: {
              cacheName: 'image-cache',
              expiration: {
                maxEntries: 200,
                maxAgeSeconds: 60 * 60 * 24 * 30 // 30å¤©
              }
            }
          },
          {
            // é™æ€èµ„æºç¼“å­˜
            urlPattern: /^https:\/\/.*\.(?:js|css)$/,
            handler: 'StaleWhileRevalidate', // åå°æ›´æ–°
            options: {
              cacheName: 'static-resource-cache',
              expiration: {
                maxEntries: 50,
                maxAgeSeconds: 60 * 60 * 24 * 7 // 7å¤©
              }
            }
          }
        ],

        // é¢„ç¼“å­˜å…³é”®æ–‡ä»¶
        globPatterns: [
          '**/*.{js,css,html,ico,png,svg,woff2}'
        ],

        // å¯¼èˆªé¢„åŠ è½½
        navigateFallback: '/index.html',

        // å¼€å‘ç¯å¢ƒç¦ç”¨
        devOptions: {
          enabled: false // å¼€å‘ç¯å¢ƒä¸å¯ç”¨ SW
        }
      }
    })
  ],

  // å…¶ä»–é…ç½®...
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    host: '0.0.0.0',
    port: 12800,
    proxy: {
      '/api': {
        target: 'http://localhost:12801',
        changeOrigin: true,
      },
      '/uploads': {
        target: 'http://localhost:12801',
        changeOrigin: true,
      },
    },
  },
})
```

### 5.2 ç”Ÿæˆ PWA å›¾æ ‡

```bash
# æ–¹æ³•1: ä½¿ç”¨åœ¨çº¿å·¥å…·
# https://realfavicongenerator.net/
# ä¸Šä¼ ä¸€ä¸ª 512x512 çš„æºå›¾æ ‡ï¼Œè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å°ºå¯¸

# æ–¹æ³•2: ä½¿ç”¨è„šæœ¬ç”Ÿæˆ
npm install -D pwa-asset-generator

# ç”Ÿæˆå›¾æ ‡
npx pwa-asset-generator public/logo.png public/pwa-icons \
  --manifest public/manifest.json \
  --index public/index.html \
  --background "#1890ff" \
  --padding "20%"

# æ–¹æ³•3: æ‰‹åŠ¨è°ƒæ•´
# éœ€è¦ä»¥ä¸‹å°ºå¯¸çš„å›¾æ ‡:
# - 72x72, 96x96, 128x128, 144x144, 152x152, 192x192, 384x384, 512x512
# å»ºè®®ä½¿ç”¨ PhotoShopã€Figma ç­‰å·¥å…·å¯¼å‡º
```

### 5.3 æ³¨å†Œ Service Worker

```typescript
// frontend/src/main.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import App from './App'
import './index.css'

// å¯¼å…¥ PWA æ³¨å†Œ
import './pwa-register'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false,
      retry: 1,
      staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ
    },
  },
})

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <App />
      </BrowserRouter>
    </QueryClientProvider>
  </React.StrictMode>,
)
```

```typescript
// frontend/src/pwa-register.ts
import { registerSW } from 'virtual:pwa-register'

// æ›´æ–° Service Worker
const updateSW = registerSW({
  onNeedRefresh() {
    // å½“æœ‰æ–°ç‰ˆæœ¬æ—¶ï¼Œæç¤ºç”¨æˆ·åˆ·æ–°
    if (confirm('å‘ç°æ–°ç‰ˆæœ¬ï¼Œæ˜¯å¦ç«‹å³åˆ·æ–°ï¼Ÿ')) {
      updateSW(true) // ç«‹å³åˆ·æ–°
    }
  },
  onOfflineReady() {
    // ç¦»çº¿å†…å®¹å·²å‡†å¤‡å¥½
    console.log('åº”ç”¨å·²å‡†å¤‡å¥½ç¦»çº¿å·¥ä½œ')
  },
  onRegistered(registration) {
    // Service Worker æ³¨å†ŒæˆåŠŸ
    console.log('Service Worker å·²æ³¨å†Œ')

    // æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡æ›´æ–°
    if (registration) {
      setInterval(() => {
        registration.update()
      }, 60 * 60 * 1000)
    }
  },
  onRegisterError(error) {
    console.error('Service Worker æ³¨å†Œå¤±è´¥', error)
  }
})

export { updateSW }
```

### 5.4 å®‰è£…æç¤ºç»„ä»¶

```typescript
// frontend/src/components/PWAInstallPrompt.tsx
import { useState, useEffect } from 'react'
import { Button, Modal } from 'antd'
import { DownloadOutlined } from '@ant-design/icons'

export const PWAInstallPrompt = () => {
  const [deferredPrompt, setDeferredPrompt] = useState<any>(null)
  const [showInstallPrompt, setShowInstallPrompt] = useState(false)

  useEffect(() => {
    // ç›‘å¬ beforeinstallprompt äº‹ä»¶
    const handler = (e: Event) => {
      // é˜»æ­¢é»˜è®¤å®‰è£…æç¤º
      e.preventDefault()
      // ä¿å­˜äº‹ä»¶ä¾›åç»­ä½¿ç”¨
      setDeferredPrompt(e)
      // æ˜¾ç¤ºè‡ªå®šä¹‰å®‰è£…UI
      setShowInstallPrompt(true)
    }

    window.addEventListener('beforeinstallprompt', handler)

    // æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
    if (window.matchMedia('(display-mode: standalone)').matches) {
      setShowInstallPrompt(false)
    }

    return () => {
      window.removeEventListener('beforeinstallprompt', handler)
    }
  }, [])

  const handleInstall = async () => {
    if (!deferredPrompt) {
      return
    }

    // æ˜¾ç¤ºå®‰è£…æç¤º
    deferredPrompt.prompt()

    // ç­‰å¾…ç”¨æˆ·å“åº”
    const { outcome } = await deferredPrompt.userChoice

    if (outcome === 'accepted') {
      console.log('ç”¨æˆ·æ¥å—äº†å®‰è£…æç¤º')
    }

    // æ¸…ç†
    setDeferredPrompt(null)
    setShowInstallPrompt(false)
  }

  const handleDismiss = () => {
    setShowInstallPrompt(false)
    // 7å¤©åå†æ¬¡æç¤º
    const dismissTime = Date.now() + 7 * 24 * 60 * 60 * 1000
    localStorage.setItem('pwa-install-dismiss', dismissTime.toString())
  }

  // æ£€æŸ¥æ˜¯å¦åº”è¯¥æ˜¾ç¤ºæç¤º
  const shouldShow = () => {
    const dismissTime = localStorage.getItem('pwa-install-dismiss')
    if (dismissTime && Date.now() < parseInt(dismissTime)) {
      return false
    }
    return showInstallPrompt
  }

  if (!shouldShow()) {
    return null
  }

  return (
    <Modal
      title="å®‰è£…æ¤ç‰©ç®¡å®¶"
      open={showInstallPrompt}
      onOk={handleInstall}
      onCancel={handleDismiss}
      cancelText="æš‚ä¸å®‰è£…"
      okText="ç«‹å³å®‰è£…"
      icon={<DownloadOutlined />}
    >
      <p>å®‰è£…åæ‚¨å¯ä»¥ï¼š</p>
      <ul>
        <li>âœ“ åœ¨ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨</li>
        <li>âœ“ ç¦»çº¿ä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½</li>
        <li>âœ“ æ¥æ”¶ä»»åŠ¡æé†’é€šçŸ¥</li>
        <li>âœ“ æ›´æµç•…çš„ä½¿ç”¨ä½“éªŒ</li>
      </ul>
    </Modal>
  )
}
```

### 5.5 æ¨é€é€šçŸ¥(å¯é€‰)

```typescript
// frontend/src/services/push-notification.ts
export class PushNotificationService {
  async requestPermission(): Promise<boolean> {
    if (!('Notification' in window)) {
      console.log('æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥')
      return false
    }

    const permission = await Notification.requestPermission()
    return permission === 'granted'
  }

  async subscribe(): Promise<PushSubscription | null> {
    if (!('serviceWorker' in navigator)) {
      return null
    }

    const registration = await navigator.serviceWorker.ready

    // è®¢é˜…æ¨é€æœåŠ¡
    const subscription = await registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: this.urlBase64ToUint8Array(
        process.env.VITE_VAPID_PUBLIC_KEY!
      )
    })

    // å‘é€è®¢é˜…ä¿¡æ¯åˆ°æœåŠ¡å™¨
    await this.sendSubscriptionToServer(subscription)

    return subscription
  }

  private urlBase64ToUint8Array(base64String: string): Uint8Array {
    // å®ç° Base64 ç¼–ç è½¬æ¢
    const padding = '='.repeat((4 - base64String.length % 4) % 4)
    const base64 = (base64String + padding)
      .replace(/-/g, '+')
      .replace(/_/g, '/')

    const rawData = window.atob(base64)
    const outputArray = new Uint8Array(rawData.length)

    for (let i = 0; i < rawData.length; ++i) {
      outputArray[i] = rawData.charCodeAt(i)
    }
    return outputArray
  }

  private async sendSubscriptionToServer(subscription: PushSubscription) {
    // å‘é€åˆ°åç«¯ API
    await fetch('/api/push/subscribe', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(subscription)
    })
  }

  showNotification(title: string, options: NotificationOptions = {}) {
    if (Notification.permission === 'granted') {
      new Notification(title, {
        icon: '/pwa-icons/icon-192x192.png',
        badge: '/pwa-icons/icon-72x72.png',
        ...options
      })
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const pushService = new PushNotificationService()

// è¯·æ±‚æƒé™
pushService.requestPermission().then(granted => {
  if (granted) {
    pushService.subscribe()
  }
})

// å‘é€é€šçŸ¥
pushService.showNotification('ä»»åŠ¡æé†’', {
  body: 'æ‚¨çš„æ¤ç‰©éœ€è¦æµ‡æ°´äº†ï¼',
  tag: 'task-reminder',
  requireInteraction: false
})
```

---

## å…­ã€å“åº”å¼ä¼˜åŒ–æ–¹æ¡ˆ

### 6.1 ç§»åŠ¨ç«¯å¸ƒå±€é€‚é…

#### 6.1.1 ä¸»å¸ƒå±€æ”¹é€ 

```typescript
// frontend/src/components/layout/MainLayout.tsx
import { useState } from 'react'
import { Layout, Menu, Button, Drawer } from 'antd'
import {
  HomeOutlined,
  ExperimentOutlined,
  FolderOutlined,
  CheckSquareOutlined,
  SettingOutlined,
  MenuOutlined
} from '@ant-design/icons'
import { Outlet } from 'react-router-dom'

const { Header, Content, Sider } = Layout

export const MainLayout = () => {
  const [drawerOpen, setDrawerOpen] = useState(false)
  const [isMobile, setIsMobile] = useState(window.innerWidth < 768)

  // ç›‘å¬å±å¹•å°ºå¯¸å˜åŒ–
  useEffect(() => {
    const handleResize = () => {
      const mobile = window.innerWidth < 768
      setIsMobile(mobile)
      if (!mobile) setDrawerOpen(false)
    }

    window.addEventListener('resize', handleResize)
    return () => window.removeEventListener('resize', handleResize)
  }, [])

  const menuItems = [
    { key: '/', icon: <HomeOutlined />, label: 'ä»ªè¡¨ç›˜' },
    { key: '/plants', icon: <ExperimentOutlined />, label: 'æ¤ç‰©' },
    { key: '/rooms', icon: <FolderOutlined />, label: 'æˆ¿é—´' },
    { key: '/tasks', icon: <CheckSquareOutlined />, label: 'ä»»åŠ¡' },
    { key: '/settings', icon: <SettingOutlined />, label: 'è®¾ç½®' },
  ]

  const siderContent = (
    <Menu
      mode="inline"
      defaultSelectedKeys={[location.pathname]}
      items={menuItems}
      onClick={({ key }) => {
        navigate(key)
        if (isMobile) setDrawerOpen(false)
      }}
    />
  )

  return (
    <Layout style={{ minHeight: '100vh' }}>
      {/* æ¡Œé¢ç«¯ä¾§è¾¹æ  */}
      {!isMobile && (
        <Sider
          breakpoint="lg"
          collapsedWidth="0"
          style={{
            overflow: 'auto',
            height: '100vh',
            position: 'fixed',
            left: 0,
            top: 0,
            bottom: 0,
          }}
        >
          <div style={{
            height: 64,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            color: '#fff',
            fontSize: 20,
            fontWeight: 'bold'
          }}>
            æ¤ç‰©ç®¡å®¶
          </div>
          {siderContent}
        </Sider>
      )}

      {/* ä¸»å†…å®¹åŒº */}
      <Layout style={{ marginLeft: isMobile ? 0 : 200 }}>
        {/* å¤´éƒ¨ */}
        <Header
          style={{
            padding: '0 24px',
            background: '#fff',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',
            position: 'sticky',
            top: 0,
            zIndex: 100
          }}
        >
          <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>
            {/* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */}
            {isMobile && (
              <Button
                type="text"
                icon={<MenuOutlined />}
                onClick={() => setDrawerOpen(true)}
              />
            )}
            <h2 style={{ margin: 0, fontSize: isMobile ? 18 : 20 }}>
              æ¤ç‰©ç®¡å®¶
            </h2>
          </div>

          {/* å…¶ä»–å¤´éƒ¨å†…å®¹... */}
        </Header>

        {/* å†…å®¹åŒº */}
        <Content style={{ margin: '24px', overflow: 'auto' }}>
          <Outlet />
        </Content>
      </Layout>

      {/* ç§»åŠ¨ç«¯æŠ½å±‰èœå• */}
      <Drawer
        title="èœå•"
        placement="left"
        open={drawerOpen}
        onClose={() => setDrawerOpen(false)}
        width={250}
      >
        {siderContent}
      </Drawer>
    </Layout>
  )
}
```

#### 6.1.2 æ¤ç‰©å¡ç‰‡å“åº”å¼

```typescript
// frontend/src/components/plant/PlantCard.tsx
import { Card, Tag, Image } from 'antd'
import { ExperimentOutlined } from '@ant-design/icons'

interface PlantCardProps {
  plant: Plant
  onClick?: () => void
}

export const PlantCard = ({ plant, onClick }: PlantCardProps) => {
  return (
    <Card
      hoverable
      onClick={onClick}
      cover={
        <div className="relative aspect-[4/3] overflow-hidden">
          <Image
            src={plant.primary_image?.thumbnail_url || plant.images[0]?.thumbnail_url}
            alt={plant.name}
            preview={false}
            className="w-full h-full object-cover"
            loading="lazy" // å›¾ç‰‡æ‡’åŠ è½½
          />
          {/* ç§»åŠ¨ç«¯æ ‡ç­¾ */}
          <div className="absolute top-2 right-2 flex flex-col gap-1">
            {plant.location && (
              <Tag color="blue">{plant.location}</Tag>
            )}
          </div>
        </div>
      }
      className="transition-transform hover:scale-[1.02]"
      // å“åº”å¼æ ·å¼
      style={{
        // ç§»åŠ¨ç«¯: æ— è¾¹è·ï¼Œå¡ç‰‡å¼
        // æ¡Œé¢ç«¯: æ ‡å‡†å¡ç‰‡
      }}
      bodyStyle={{ padding: 12 }}
    >
      {/* å¡ç‰‡å†…å®¹ */}
      <div className="space-y-2">
        <h3 className="text-lg font-semibold truncate">
          {plant.name}
        </h3>

        {/* ç§»åŠ¨ç«¯ç®€åŒ–ä¿¡æ¯ */}
        <div className="hidden md:block">
          <p className="text-sm text-gray-500 line-clamp-2">
            {plant.description}
          </p>
        </div>

        {/* å…»æŠ¤çŠ¶æ€ */}
        <div className="flex gap-2 flex-wrap">
          {plant.needs_watering && (
            <Tag color="blue">éœ€æµ‡æ°´</Tag>
          )}
          {plant.needs_fertilizing && (
            <Tag color="green">éœ€æ–½è‚¥</Tag>
          )}
        </div>
      </div>
    </Card>
  )
}

// ä½¿ç”¨ç¤ºä¾‹ - å“åº”å¼ç½‘æ ¼
export const PlantGrid = ({ plants }: { plants: Plant[] }) => {
  return (
    <div className="
      grid
      grid-cols-2           /* ç§»åŠ¨ç«¯: 2åˆ— */
      sm:grid-cols-3        /* å°å±: 3åˆ— */
      md:grid-cols-4        /* å¹³æ¿: 4åˆ— */
      lg:grid-cols-5        /* æ¡Œé¢: 5åˆ— */
      gap-3                 /* é—´è· */
      p-2                   /* å†…è¾¹è· */
    ">
      {plants.map(plant => (
        <PlantCard
          key={plant.id}
          plant={plant}
          onClick={() => handlePlantClick(plant)}
        />
      ))}
    </div>
  )
}
```

#### 6.1.3 ä»»åŠ¡åˆ—è¡¨ç§»åŠ¨ç«¯ä¼˜åŒ–

```typescript
// frontend/src/components/task/TaskListItem.tsx
import { List, SwipeAction, Dialog } from 'antd-mobile'
import { CheckCircleOutlined, ClockCircleOutlined } from '@ant-design/icons'

interface TaskItemProps {
  task: Task
  onComplete: (id: number) => void
  onSnooze: (id: number) => void
}

export const TaskListItem = ({ task, onComplete, onSnooze }: TaskItemProps) => {
  // æ»‘åŠ¨æ“ä½œé…ç½®
  const rightActions = [
    {
      key: 'complete',
      text: 'å®Œæˆ',
      color: '#52c41a',
      onClick: async () => {
        await Dialog.confirm({
          content: 'ç¡®è®¤å®Œæˆæ­¤ä»»åŠ¡ï¼Ÿ'
        })
        onComplete(task.id)
      }
    },
    {
      key: 'snooze',
      text: 'æ¨è¿Ÿ',
      color: '#ffcf28',
      onClick: () => onSnooze(task.id)
    }
  ]

  return (
    <SwipeAction
      rightActions={rightActions}
      className="bg-white rounded-lg mb-2"
    >
      <List.Item
        onClick={() => {/* è·³è½¬è¯¦æƒ… */}}
        className="px-4 py-3"
      >
        <div className="flex items-center gap-3">
          {/* ä»»åŠ¡å›¾æ ‡ */}
          <div className={`
            w-10 h-10 rounded-full flex items-center justify-center
            ${task.is_overdue ? 'bg-red-100' :
              task.is_today ? 'bg-blue-100' : 'bg-gray-100'}
          `}>
            {task.is_overdue ? (
              <ClockCircleOutlined className="text-red-500" />
            ) : (
              <CheckCircleOutlined className="text-blue-500" />
            )}
          </div>

          {/* ä»»åŠ¡ä¿¡æ¯ */}
          <div className="flex-1 min-w-0">
            <div className="font-semibold truncate">
              {task.title}
            </div>
            <div className="text-sm text-gray-500 truncate">
              {task.plant?.name} â€¢ {task.task_type}
            </div>
          </div>

          {/* åˆ°æœŸæ—¶é—´ */}
          <div className="text-right">
            <div className={`
              text-sm font-medium
              ${task.is_overdue ? 'text-red-500' : 'text-gray-600'}
            `}>
              {formatDate(task.due_date)}
            </div>
          </div>
        </div>
      </List.Item>
    </SwipeAction>
  )
}
```

### 6.2 è§¦æ‘¸äº¤äº’ä¼˜åŒ–

#### 6.2.1 ä¸‹æ‹‰åˆ·æ–°

```typescript
// frontend/src/hooks/usePullToRefresh.ts
import { useEffect, useRef } from 'react'

export const usePullToRefresh = (onRefresh: () => Promise<void>) => {
  const containerRef = useRef<HTMLDivElement>(null)
  const startY = useRef(0)
  const currentY = useRef(0)
  const isDragging = useRef(false)

  useEffect(() => {
    const container = containerRef.current
    if (!container) return

    const handleTouchStart = (e: TouchEvent) => {
      // åªåœ¨é¡¶éƒ¨æ—¶è§¦å‘
      if (container.scrollTop === 0) {
        startY.current = e.touches[0].clientY
        isDragging.current = true
      }
    }

    const handleTouchMove = (e: TouchEvent) => {
      if (!isDragging.current) return

      currentY.current = e.touches[0].clientY
      const diff = currentY.current - startY.current

      // åªåœ¨å‘ä¸‹æ‹‰åŠ¨æ—¶å“åº”
      if (diff > 0 && container.scrollTop === 0) {
        e.preventDefault()

        // æ˜¾ç¤ºåˆ·æ–°æŒ‡ç¤ºå™¨
        const indicator = container.querySelector('[data-refresh-indicator]')
        if (indicator) {
          indicator.setAttribute('data-pulling', diff > 80 ? 'true' : 'false')
        }
      }
    }

    const handleTouchEnd = async () => {
      if (!isDragging.current) return
      isDragging.current = false

      const diff = currentY.current - startY.current

      // æ‹‰åŠ¨è¶…è¿‡80pxè§¦å‘åˆ·æ–°
      if (diff > 80) {
        const indicator = container.querySelector('[data-refresh-indicator]')
        indicator?.setAttribute('data-refreshing', 'true')

        await onRefresh()

        indicator?.removeAttribute('data-refreshing')
      }

      startY.current = 0
      currentY.current = 0
    }

    container.addEventListener('touchstart', handleTouchStart)
    container.addEventListener('touchmove', handleTouchMove, { passive: false })
    container.addEventListener('touchend', handleTouchEnd)

    return () => {
      container.removeEventListener('touchstart', handleTouchStart)
      container.removeEventListener('touchmove', handleTouchMove)
      container.removeEventListener('touchend', handleTouchEnd)
    }
  }, [onRefresh])

  return { containerRef }
}

// ä½¿ç”¨ç¤ºä¾‹
export const RefreshablePlantList = () => {
  const { refetch } = useQuery(['plants'], fetchPlants)
  const { containerRef } = usePullToRefresh(async () => {
    await refetch()
  })

  return (
    <div
      ref={containerRef}
      className="overflow-auto h-full relative"
    >
      {/* åˆ·æ–°æŒ‡ç¤ºå™¨ */}
      <div
        data-refresh-indicator
        className="
          absolute top-0 left-0 right-0
          flex items-center justify-center
          h-0 overflow-hidden
          transition-all duration-200
          data-[pulling=true]:h-20
          data-[refreshing=true]:h-20
        "
      >
        <div className="flex items-center gap-2 text-blue-500">
          <LoadingIndicator />
          <span>åŠ è½½ä¸­...</span>
        </div>
      </div>

      {/* å†…å®¹ */}
      <PlantList />
    </div>
  )
}
```

#### 6.2.2 æ— é™æ»šåŠ¨

```typescript
// frontend/src/hooks/useInfiniteScroll.ts
import { useEffect, useState, useRef } from 'react'

interface UseInfiniteScrollOptions {
  threshold?: number // è§¦å‘é˜ˆå€¼(åƒç´ )
  onLoadMore: () => void
  hasMore: boolean
}

export const useInfiniteScroll = ({
  threshold = 200,
  onLoadMore,
  hasMore
}: UseInfiniteScrollOptions) => {
  const [isLoading, setIsLoading] = useState(false)
  const containerRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    const container = containerRef.current
    if (!container) return

    const handleScroll = () => {
      if (!hasMore || isLoading) return

      const { scrollTop, scrollHeight, clientHeight } = container

      // è·ç¦»åº•éƒ¨å°äºé˜ˆå€¼æ—¶è§¦å‘åŠ è½½
      if (scrollHeight - scrollTop - clientHeight < threshold) {
        setIsLoading(true)
        onLoadMore()
      }
    }

    container.addEventListener('scroll', handleScroll)
    return () => container.removeEventListener('scroll', handleScroll)
  }, [hasMore, isLoading, onLoadMore, threshold])

  // é‡ç½®åŠ è½½çŠ¶æ€
  useEffect(() => {
    if (isLoading) {
      const timer = setTimeout(() => setIsLoading(false), 500)
      return () => clearTimeout(timer)
    }
  }, [isLoading])

  return { containerRef, isLoading }
}

// ä½¿ç”¨ç¤ºä¾‹
export const InfinitePlantList = () => {
  const [page, setPage] = useState(1)
  const [plants, setPlants] = useState<Plant[]>([])

  const { data, isLoading, fetchNextPage, hasNextPage } = useInfiniteQuery(
    ['plants', page],
    ({ pageParam = page }) => fetchPlants(pageParam),
    {
      getNextPageParam: (lastPage) => {
        if (lastPage.hasMore) return lastPage.page + 1
        return undefined
      }
    }
  )

  const { containerRef, isLoading: isLoadingMore } = useInfiniteScroll({
    onLoadMore: () => fetchNextPage(),
    hasMore: hasNextPage || false
  })

  return (
    <div
      ref={containerRef}
      className="overflow-auto h-screen p-4"
    >
      <div className="grid grid-cols-2 gap-3">
        {data?.pages.map(page =>
          page.plants.map(plant => (
            <PlantCard key={plant.id} plant={plant} />
          ))
        )}
      </div>

      {/* åŠ è½½æ›´å¤šæŒ‡ç¤ºå™¨ */}
      {(isLoading || isLoadingMore) && (
        <div className="text-center py-4">
          <Spin />
        </div>
      )}

      {/* æ²¡æœ‰æ›´å¤šæ•°æ® */}
      {!hasNextPage && plants.length > 0 && (
        <div className="text-center py-4 text-gray-500">
          æ²¡æœ‰æ›´å¤šæ¤ç‰©äº†
        </div>
      )}
    </div>
  )
}
```

### 6.3 è¡¨å•ç§»åŠ¨ç«¯ä¼˜åŒ–

```typescript
// frontend/src/components/mobile/MobileForm.tsx
import { Form, Input, Select, Button } from 'antd'
import { FormInstance } from 'antd/es/form'

interface MobileFormProps {
  form: FormInstance
  onFinish: (values: any) => void
  loading?: boolean
}

export const MobilePlantForm = ({ form, onFinish, loading }: MobileFormProps) => {
  return (
    <Form
      form={form}
      onFinish={onFinish}
      layout="vertical"
      className="p-4"
    >
      {/* æ¤ç‰©åç§° */}
      <Form.Item
        label="æ¤ç‰©åç§°"
        name="name"
        rules={[{ required: true, message: 'è¯·è¾“å…¥æ¤ç‰©åç§°' }]}
      >
        <Input
          placeholder="ä¾‹å¦‚ï¼šç»¿è"
          size="large" // ç§»åŠ¨ç«¯ä½¿ç”¨å¤§å·è¾“å…¥æ¡†
          autoFocus
        />
      </Form.Item>

      {/* æˆ¿é—´é€‰æ‹© */}
      <Form.Item
        label="æ‰€åœ¨æˆ¿é—´"
        name="room_id"
        rules={[{ required: true, message: 'è¯·é€‰æ‹©æˆ¿é—´' }]}
      >
        <Select
          placeholder="é€‰æ‹©æˆ¿é—´"
          size="large"
          options={roomOptions}
        />
      </Form.Item>

      {/* èŠ±æ¶ä½ç½® */}
      <Form.Item
        label="èŠ±æ¶ä½ç½®"
        name="shelf_id"
      >
        <Select
          placeholder="é€‰æ‹©èŠ±æ¶(å¯é€‰)"
          size="large"
          allowClear
          options={shelfOptions}
        />
      </Form.Item>

      {/* æè¿° */}
      <Form.Item
        label="æè¿°"
        name="description"
      >
        <Input.TextArea
          placeholder="è®°å½•æ¤ç‰©ç‰¹ç‚¹ã€å–œå¥½..."
          rows={4}
          showCount
          maxLength={200}
        />
      </Form.Item>

      {/* æäº¤æŒ‰é’® */}
 <Form.Item>
        <Button
          type="primary"
          htmlType="submit"
          loading={loading}
          size="large"
          block // ç§»åŠ¨ç«¯å…¨å®½æŒ‰é’®
        >
          ä¿å­˜
        </Button>
      </Form.Item>
    </Form>
  )
}
```

---

## ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 7.1 å›¾ç‰‡ä¼˜åŒ–

```typescript
// 1. å“åº”å¼å›¾ç‰‡ (srcset)
export const ResponsiveImage = ({ src, alt }: { src: string, alt: string }) => {
  return (
    <img
      srcSet={`
        ${src}?w=320 320w,
        ${src}?w=640 640w,
        ${src}?w=1024 1024w,
        ${src}?w=1920 1924w
      `}
      sizes="
        (max-width: 640px) 100vw,
        (max-width: 1024px) 50vw,
        33vw
      "
      src={`${src}?w=640`}
      alt={alt}
      loading="lazy"
    />
  )
}

// 2. å›¾ç‰‡æ‡’åŠ è½½
export const LazyImage = ({ src, alt, ...props }: ImgHTMLAttributes<HTMLImageElement>) => {
  const [imageSrc, setImageSrc] = useState<string>()
  const imgRef = useRef<HTMLImageElement>(null)

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setImageSrc(src)
          observer.disconnect()
        }
      },
      { rootMargin: '100px' } // æå‰100pxåŠ è½½
    )

    if (imgRef.current) {
      observer.observe(imgRef.current)
    }

    return () => observer.disconnect()
  }, [src])

  return (
    <img
      ref={imgRef}
      src={imageSrc || 'data:image/svg+xml,...'} // å ä½å›¾
      alt={alt}
      {...props}
    />
  )
}

// 3. WebP æ ¼å¼æ”¯æŒæ£€æµ‹
export const OptimizedImage = ({ src, alt, ...props }: ImgHTMLAttributes<HTMLImageElement>) => {
  const [supportsWebP, setSupportsWebP] = useState(false)

  useEffect(() => {
    const checkWebP = () => {
      const canvas = document.createElement('canvas')
      if (canvas.getContext && canvas.getContext('2d')) {
        setSupportsWebP(
          canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0
        )
      }
    }
    checkWebP()
  }, [])

  const imgSrc = supportsWebP
    ? src.replace(/\.(jpg|png)$/, '.webp')
    : src

  return <img src={imgSrc} alt={alt} {...props} />
}
```

### 7.2 ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½

```typescript
// frontend/src/App.tsx
import { lazy, Suspense } from 'react'
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import { Spin } from 'antd'

// è·¯ç”±æ‡’åŠ è½½
const Dashboard = lazy(() => import('./pages/Dashboard'))
const Plants = lazy(() => import('./pages/Plants'))
const Rooms = lazy(() => import('./pages/Rooms'))
const Tasks = lazy(() => import('./pages/Tasks'))
const Settings = lazy(() => import('./pages/Settings'))

// åŠ è½½æŒ‡ç¤ºå™¨
const PageLoading = () => (
  <div className="flex items-center justify-center h-screen">
    <Spin size="large" />
  </div>
)

export const App = () => {
  return (
    <BrowserRouter>
      <Suspense fallback={<PageLoading />}>
        <Routes>
          <Route path="/" element={<Dashboard />} />
          <Route path="/plants" element={<Plants />} />
          <Route path="/plants/:id" element={<PlantDetail />} />
          <Route path="/rooms" element={<Rooms />} />
          <Route path="/rooms/:id" element={<RoomDetail />} />
          <Route path="/tasks" element={<Tasks />} />
          <Route path="/settings" element={<Settings />} />
        </Routes>
      </Suspense>
    </BrowserRouter>
  )
}

// ç»„ä»¶æ‡’åŠ è½½
export const HeavyComponent = lazy(() => import('./components/HeavyComponent'))

// é¢„åŠ è½½å…³é”®èµ„æº
export const LinkWithPrefetch = ({ to, children, ...props }: LinkProps) => {
  const handleMouseEnter = () => {
    // é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½
    import('./pages/TargetPage')
  }

  return (
    <Link
      to={to}
      onMouseEnter={handleMouseEnter}
      {...props}
    >
      {children}
    </Link>
  )
}
```

### 7.3 ç¼“å­˜ç­–ç•¥

```typescript
// frontend/src/lib/cache.ts
import { QueryClient } from '@tanstack/react-query'

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      // æ•°æ®è¿‡æœŸæ—¶é—´
      staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿå†…æ•°æ®è§†ä¸ºæ–°é²œ

      // ç¼“å­˜æ—¶é—´
      gcTime: 30 * 60 * 1000, // 30åˆ†é’Ÿååƒåœ¾å›æ”¶

      // å¤±è´¥é‡è¯•
      retry: (failureCount, error) => {
        // 4xx é”™è¯¯ä¸é‡è¯•
        if (error?.status >= 400 && error?.status < 500) {
          return false
        }
        // æœ€å¤šé‡è¯•2æ¬¡
        return failureCount < 2
      },

      // é‡è¯•å»¶è¿Ÿ
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),

      // çª—å£èšç„¦æ—¶ä¸è‡ªåŠ¨é‡æ–°è·å–
      refetchOnWindowFocus: false,

      // ç»„ä»¶æŒ‚è½½æ—¶ä¸è‡ªåŠ¨é‡æ–°è·å–
      refetchOnMount: false,

      // ç¼“å­˜å…±äº«
      networkMode: 'online', // åªåœ¨çº¿æ—¶è¯·æ±‚
    },
  },
})

// ç‰¹å®šæŸ¥è¯¢é…ç½®
export const usePlants = () => {
  return useQuery({
    queryKey: ['plants'],
    queryFn: fetchPlants,
    staleTime: 10 * 60 * 1000, // æ¤ç‰©åˆ—è¡¨10åˆ†é’Ÿ
  })
}

export const usePlant = (id: number) => {
  return useQuery({
    queryKey: ['plant', id],
    queryFn: () => fetchPlant(id),
    staleTime: 30 * 60 * 1000, // å•ä¸ªæ¤ç‰©30åˆ†é’Ÿ
  })
}

// LocalStorage ç¼“å­˜å·¥å…·
export const storage = {
  get: <T>(key: string, defaultValue?: T): T | null => {
    try {
      const item = localStorage.getItem(key)
      return item ? JSON.parse(item) : defaultValue ?? null
    } catch {
      return defaultValue ?? null
    }
  },

  set: <T>(key: string, value: T): void => {
    try {
      localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.error('LocalStorage set error:', error)
    }
  },

  remove: (key: string): void => {
    localStorage.removeItem(key)
  },

  clear: (): void => {
    localStorage.clear()
  }
}

// ä½¿ç”¨ç¤ºä¾‹
export const useCachedSettings = () => {
  const [settings, setSettings] = useState(() =>
    storage.get<Settings>('app-settings', defaultSettings)
  )

  useEffect(() => {
    storage.set('app-settings', settings)
  }, [settings])

  return { settings, setSettings }
}
```

### 7.4 æ€§èƒ½ç›‘æ§

```typescript
// frontend/src/lib/performance.ts
export class PerformanceMonitor {
  // è®°å½•é¡µé¢åŠ è½½æ—¶é—´
  static measurePageLoad() {
    if (typeof window === 'undefined' || !window.performance) return

    const perfData = window.performance.timing
    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart
    const domReadyTime = perfData.domContentLoadedEventEnd - perfData.navigationStart

    console.log(`é¡µé¢åŠ è½½æ—¶é—´: ${pageLoadTime}ms`)
    console.log(`DOM å‡†å¤‡æ—¶é—´: ${domReadyTime}ms`)

    // å‘é€åˆ°åˆ†ææœåŠ¡
    this.reportToAnalytics({
      metric: 'page_load_time',
      value: pageLoadTime,
    })
  }

  // ç›‘æ§ Core Web Vitals
  static observeCoreWebVitals() {
    // Largest Contentful Paint (LCP)
    if ('PerformanceObserver' in window) {
      try {
        const observer = new PerformanceObserver((list) => {
          const entries = list.getEntries()
          const lastEntry = entries[entries.length - 1] as any
          console.log(`LCP: ${lastEntry.renderTime || lastEntry.loadTime}ms`)
        })
        observer.observe({ entryTypes: ['largest-contentful-paint'] })
      } catch (e) {
        console.warn('LCP monitoring not supported')
      }

      // First Input Delay (FID)
      try {
        const observer = new PerformanceObserver((list) => {
          const entries = list.getEntries()
          entries.forEach((entry: any) => {
            console.log(`FID: ${entry.processingStart - entry.startTime}ms`)
          })
        })
        observer.observe({ entryTypes: ['first-input'] })
      } catch (e) {
        console.warn('FID monitoring not supported')
      }

      // Cumulative Layout Shift (CLS)
      let clsValue = 0
      try {
        const observer = new PerformanceObserver((list) => {
          const entries = list.getEntries()
          entries.forEach((entry: any) => {
            if (!entry.hadRecentInput) {
              clsValue += entry.value
              console.log(`CLS: ${clsValue}`)
            }
          })
        })
        observer.observe({ entryTypes: ['layout-shift'] })
      } catch (e) {
        console.warn('CLS monitoring not supported')
      }
    }
  }

  // ç›‘æ§ API è¯·æ±‚æ€§èƒ½
  static trackAPITiming(url: string) {
    const startTime = performance.now()

    return {
      end: () => {
        const duration = performance.now() - startTime
        console.log(`API ${url}: ${duration.toFixed(2)}ms`)

        if (duration > 3000) {
          console.warn(`æ…¢è¯·æ±‚: ${url} è€—æ—¶ ${duration.toFixed(2)}ms`)
        }
      }
    }
  }

  // ä¸ŠæŠ¥åˆ°åˆ†ææœåŠ¡
  private static reportToAnalytics(data: any) {
    // å‘é€åˆ° Google Analyticsã€Mixpanel ç­‰
    if (navigator.sendBeacon) {
      const blob = new Blob([JSON.stringify(data)], {
        type: 'application/json'
      })
      navigator.sendBeacon('/api/analytics', blob)
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
// åœ¨åº”ç”¨å¯åŠ¨æ—¶
PerformanceMonitor.measurePageLoad()
PerformanceMonitor.observeCoreWebVitals()

// API è°ƒç”¨æ—¶
const timing = PerformanceMonitor.trackAPITiming('/api/plants')
await fetchPlants()
timing.end()
```

---

## å…«ã€æµ‹è¯•ä¸éƒ¨ç½²

### 8.1 ç§»åŠ¨ç«¯æµ‹è¯•ç­–ç•¥

#### 8.1.1 è®¾å¤‡æµ‹è¯•æ¸…å•

```typescript
// å¿…æµ‹è®¾å¤‡åˆ—è¡¨
const essentialDevices = [
  // iOS
  { device: 'iPhone SE', width: 375, height: 667, os: 'iOS 17' },
  { device: 'iPhone 13', width: 390, height: 844, os: 'iOS 17' },
  { device: 'iPhone 14 Pro Max', width: 430, height: 932, os: 'iOS 17' },

  // Android
  { device: 'Samsung Galaxy S21', width: 360, height: 800, os: 'Android 13' },
  { device: 'Pixel 6', width: 412, height: 915, os: 'Android 13' },

  // å¹³æ¿
  { device: 'iPad', width: 768, height: 1024, os: 'iPadOS 17' },
  { device: 'iPad Pro', width: 1024, height: 1366, os: 'iPadOS 17' },
]

// æµ‹è¯•ç”¨ä¾‹
const testCases = [
  'é¦–é¡µåŠ è½½é€Ÿåº¦',
  'å›¾ç‰‡æ‡’åŠ è½½',
  'ä¸‹æ‹‰åˆ·æ–°',
  'æ— é™æ»šåŠ¨',
  'ä¾§è¾¹æ æŠ½å±‰',
  'è¡¨å•æäº¤',
  'å¯¼èˆªåˆ‡æ¢',
  'è§¦æ‘¸å“åº”',
  'æ‰‹åŠ¿æ“ä½œ',
  'ç¦»çº¿åŠŸèƒ½(PWA)',
]
```

#### 8.1.2 çœŸæœºè°ƒè¯•æ–¹æ¡ˆ

```bash
# æ–¹æ¡ˆ1: Chrome DevTools è¿œç¨‹è°ƒè¯•(Android)
1. æ‰‹æœºå¼€å¯å¼€å‘è€…æ¨¡å¼
2. USB è¿æ¥ç”µè„‘
3. Chrome è®¿é—® chrome://inspect
4. é€‰æ‹©è®¾å¤‡è¿›è¡Œè°ƒè¯•

# æ–¹æ¡ˆ2: Safari è°ƒè¯•(iOS)
1. iOS è®¾ç½® â†’ Safari â†’ é«˜çº§ â†’ Web æ£€æŸ¥å™¨
2. Mac Safari â†’ å¼€å‘ â†’ é€‰æ‹©è®¾å¤‡
3. è¿›è¡Œè°ƒè¯•

# æ–¹æ¡ˆ3: å†…ç½‘ç©¿é€(è§åæ–‡)
# ä½¿ç”¨ NATAPP ç­‰å·¥å…·ï¼Œè®©æ‰‹æœºè®¿é—®æœ¬åœ°å¼€å‘æœåŠ¡å™¨
```

### 8.2 è‡ªåŠ¨åŒ–æµ‹è¯•

```typescript
// frontend/src/__tests__/mobile/plant-list.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { PlantGrid } from '@/components/plant/PlantGrid'

describe('PlantGrid ç§»åŠ¨ç«¯æµ‹è¯•', () => {
  // æ¨¡æ‹Ÿç§»åŠ¨ç«¯è§†å£
  beforeEach(() => {
    Object.defineProperty(window, 'innerWidth', {
      writable: true,
      configurable: true,
      value: 375, // iPhone SE å®½åº¦
    })

    // è§¦å‘ resize äº‹ä»¶
    window.dispatchEvent(new Event('resize'))
  })

  test('åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º2åˆ—å¸ƒå±€', async () => {
    const plants = generateMockPlants(10)
    render(<PlantGrid plants={plants} />)

    const grid = screen.getByTestId('plant-grid')
    expect(grid).toHaveClass('grid-cols-2')
  })

  test('å›¾ç‰‡æ‡’åŠ è½½æ­£å¸¸å·¥ä½œ', async () => {
    const plants = generateMockPlants(1)
    render(<PlantGrid plants={plants} />)

    const images = screen.getAllByRole('img')
    images.forEach(img => {
      expect(img).toHaveAttribute('loading', 'lazy')
    })
  })

  test('è§¦æ‘¸å“åº”æ­£å¸¸', async () => {
    const plants = generateMockPlants(1)
    const handleClick = jest.fn()
    render(<PlantGrid plants={plants} onPlantClick={handleClick} />)

    const card = screen.getByTestId('plant-card-1')
    fireEvent.click(card)

    await waitFor(() => {
      expect(handleClick).toHaveBeenCalled()
    })
  })
})
```

### 8.3 éƒ¨ç½²æµç¨‹

#### 8.3.1 æ„å»ºä¼˜åŒ–

```typescript
// vite.config.ts - ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
export default defineConfig({
  build: {
    // ä»£ç åˆ†å‰²
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          'antd-vendor': ['antd', '@ant-design/icons'],
          'query-vendor': ['@tanstack/react-query'],
        }
      }
    },

    // å‹ç¼©
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true, // ç§»é™¤ console
        drop_debugger: true,
      }
    },

    // èµ„æºå†…è”é™åˆ¶
    assetsInlineLimit: 4096, // < 4kb èµ„æºå†…è”

    // Source Map (ç”Ÿäº§ç¯å¢ƒå…³é—­)
    sourcemap: false,

    // Chunk å¤§å°è­¦å‘Šé™åˆ¶
    chunkSizeWarningLimit: 500,
  },

  // PWA é…ç½®...
})
```

#### 8.3.2 éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# scripts/deploy-mobile.sh

set -e

echo "ğŸš€ å¼€å§‹éƒ¨ç½² Plant-DTP ç§»åŠ¨ç«¯..."

# 1. æ„å»ºå‰ç«¯
echo "ğŸ“¦ æ„å»ºå‰ç«¯..."
cd frontend
npm run build

# 2. æµ‹è¯•æ„å»ºäº§ç‰©
echo "ğŸ§ª æµ‹è¯•æ„å»ºäº§ç‰©..."
npm run preview &
PREVIEW_PID=$!
sleep 5
curl -f http://localhost:4173/ || exit 1
kill $PREVIEW_PID

# 3. å¤‡ä»½å½“å‰ç‰ˆæœ¬
echo "ğŸ’¾ å¤‡ä»½å½“å‰ç‰ˆæœ¬..."
ssh user@server "cp -r /var/www/plant-dtp/frontend /var/www/plant-dtp/frontend.backup.$(date +%Y%m%d_%H%M%S)"

# 4. ä¸Šä¼ æ–°ç‰ˆæœ¬
echo "ğŸ“¤ ä¸Šä¼ æ–°ç‰ˆæœ¬..."
rsync -avz --delete dist/ user@server:/var/www/plant-dtp/frontend/

# 5. é‡å¯æœåŠ¡
echo "ğŸ”„ é‡å¯ Nginx..."
ssh user@server "sudo systemctl reload nginx"

# 6. å¥åº·æ£€æŸ¥
echo "ğŸ¥ å¥åº·æ£€æŸ¥..."
sleep 5
curl -f https://your-domain.com/ || exit 1

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸŒ è®¿é—®: https://your-domain.com"
```

#### 8.3.3 Nginx é…ç½®ä¼˜åŒ–

```nginx
# nginx-config/nginx-mobile.conf

server {
    listen 443 ssl http2;
    server_name your-domain.com;

    # Gzip å‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/xhtml+xml
        image/svg+xml;

    # PWA æ”¯æŒ
    location /sw.js {
        # Service Worker ä¸ç¼“å­˜
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        add_header Pragma "no-cache";
        add_header Expires "0";
    }

    # å‰ç«¯é™æ€èµ„æº
    location / {
        root /var/www/plant-dtp/frontend;
        try_files $uri $uri/ /index.html;

        # ç¼“å­˜ç­–ç•¥
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff2)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }

        # HTML ä¸ç¼“å­˜
        location ~* \.html$ {
            add_header Cache-Control "no-cache, no-store, must-revalidate";
        }
    }

    # API ä»£ç†
    location /api/ {
        proxy_pass http://localhost:12801/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # ä¸Šä¼ æ–‡ä»¶
    location /uploads/ {
        alias /path/to/uploads/;
        expires 30d;
        add_header Cache-Control "public";
    }

    # å®‰å…¨å¤´
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    add_header Content-Security-Policy "default-src 'self' http: https: data: blob: 'unsafe-inline'" always;

    # SSL è¯ä¹¦
    ssl_certificate /etc/ssl/certs/your-domain.com.crt;
    ssl_certificate_key /etc/ssl/private/your-domain.com.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
}
```

### 8.4 æœ¬åœ°è°ƒè¯• - å†…ç½‘ç©¿é€

```bash
#!/bin/bash
# scripts/dev-with-tunnel.sh

echo "ğŸš€ å¯åŠ¨ Plant-DTP ç§»åŠ¨ç«¯å¼€å‘ç¯å¢ƒ(å¸¦å†…ç½‘ç©¿é€)..."

# 1. å¯åŠ¨åç«¯
echo "ğŸ“¡ å¯åŠ¨åç«¯æœåŠ¡..."
cd backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 12801 &
BACKEND_PID=$!
cd ..

# 2. å¯åŠ¨å‰ç«¯
echo "ğŸ¨ å¯åŠ¨å‰ç«¯æœåŠ¡..."
cd frontend
npm run dev &
FRONTEND_PID=$!
cd ..

# 3. å¯åŠ¨å†…ç½‘ç©¿é€
echo "ğŸŒ å¯åŠ¨ NATAPP å†…ç½‘ç©¿é€..."
# éœ€è¦å…ˆæ³¨å†Œ: https://natapp.cn/
# è·å– authtoken åå¡«å†™
./tools/natapp -authtoken=YOUR_AUTHTOKEN &
NATAPP_PID=$!

echo "âœ… æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨ï¼"
echo ""
echo "å‰ç«¯åœ°å€: http://localhost:12800"
echo "åç«¯API: http://localhost:12801"
echo "å¤–ç½‘åœ°å€: è§ NATAPP ç»ˆç«¯è¾“å‡º"
echo ""
echo "ğŸ“± æ‰‹æœºè®¿é—®æ­¥éª¤:"
echo "1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ç½‘ç»œ"
echo "2. æ‰‹æœºæµè§ˆå™¨è®¿é—® NATAPP æä¾›çš„ https åœ°å€"
echo "3. æˆ–è€…æ‰«æ NATAPP æä¾›çš„äºŒç»´ç "
echo ""
echo "æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœåŠ¡"

# ç­‰å¾…ä¸­æ–­ä¿¡å·
trap "kill $BACKEND_PID $FRONTEND_PID $NATAPP_PID; exit" INT TERM

wait
```

---

## ä¹ã€æˆæœ¬ä¸æ—¶é—´ä¼°ç®—

### 9.1 å¼€å‘æˆæœ¬

#### å“åº”å¼ Web App é˜¶æ®µ

| ä»»åŠ¡ | å·¥æ—¶ | äººå‘˜ | è¯´æ˜ |
|------|------|------|------|
| æ–­ç‚¹ç³»ç»Ÿé…ç½® | 0.5å¤© | å‰ç«¯ | Tailwind é…ç½® |
| å¸ƒå±€ç»„ä»¶é€‚é… | 2å¤© | å‰ç«¯ | MainLayout, Header, Sidebar |
| æ ¸å¿ƒé¡µé¢é€‚é… | 3å¤© | å‰ç«¯ | Dashboard, Plants, Tasks, Rooms |
| ç»„ä»¶ç§»åŠ¨ç«¯ä¼˜åŒ– | 2å¤© | å‰ç«¯ | Card, Form, Modal |
| è§¦æ‘¸äº¤äº’ | 1.5å¤© | å‰ç«¯ | ä¸‹æ‹‰åˆ·æ–°, ä¾§æ»‘, æ‰‹åŠ¿ |
| æµ‹è¯•ä¸ä¿®å¤ | 1å¤© | å‰ç«¯ | çœŸæœºæµ‹è¯•, Bugä¿®å¤ |
| **å°è®¡** | **10å¤©** | | |

#### PWA å‡çº§é˜¶æ®µ

| ä»»åŠ¡ | å·¥æ—¶ | äººå‘˜ | è¯´æ˜ |
|------|------|------|------|
| Vite PWA é…ç½® | 1å¤© | å‰ç«¯ | æ’ä»¶é…ç½®, manifest |
| Service Worker | 1.5å¤© | å‰ç«¯ | ç¼“å­˜ç­–ç•¥, ç¦»çº¿åŠŸèƒ½ |
| å®‰è£…å¼•å¯¼ | 1å¤© | å‰ç«¯ | å®‰è£…æç¤º, å¼•å¯¼æµç¨‹ |
| æ¨é€é€šçŸ¥(å¯é€‰) | 1å¤© | å‰ç«¯ | æƒé™è¯·æ±‚, é€šçŸ¥ |
| æµ‹è¯•ä¸ä¼˜åŒ– | 1å¤© | å‰ç«¯ | å¤šå¹³å°æµ‹è¯• |
| **å°è®¡** | **5.5å¤©** | | |

#### æ€§èƒ½ä¼˜åŒ–é˜¶æ®µ

| ä»»åŠ¡ | å·¥æ—¶ | äººå‘˜ | è¯´æ˜ |
|------|------|------|------|
| å›¾ç‰‡ä¼˜åŒ– | 0.5å¤© | å‰ç«¯ | æ‡’åŠ è½½, WebP |
| ä»£ç åˆ†å‰² | 0.5å¤© | å‰ç«¯ | è·¯ç”±æ‡’åŠ è½½ |
| ç¼“å­˜ç­–ç•¥ | 0.5å¤© | å‰ç«¯ | React Query é…ç½® |
| æ€§èƒ½ç›‘æ§ | 0.5å¤© | å‰ç«¯ | Core Web Vitals |
| **å°è®¡** | **2å¤©** | | |

#### æ€»è®¡

```
å“åº”å¼ Web App: 10å¤©
PWA å‡çº§: 5.5å¤©
æ€§èƒ½ä¼˜åŒ–: 2å¤©
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡: 17.5å¤© (çº¦ 3.5 å‘¨)
```

### 9.2 è¿è¥æˆæœ¬

#### å¼€å‘ä¸æµ‹è¯•é˜¶æ®µ

| é¡¹ç›® | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| å¼€å‘å·¥å…· | Â¥0 | VS Code å…è´¹ä½¿ç”¨ |
| æœ¬åœ°æµ‹è¯• | Â¥0 | ä½¿ç”¨ç°æœ‰è®¾å¤‡ |
| å†…ç½‘ç©¿é€ | Â¥0 | NATAPP å…è´¹ç‰ˆ |
| **å°è®¡** | **Â¥0** | |

#### ç”Ÿäº§ç¯å¢ƒ(å·²æœ‰æœåŠ¡å™¨)

| é¡¹ç›® | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| æœåŠ¡å™¨ | Â¥0 | ä½¿ç”¨ç°æœ‰è…¾è®¯äº‘æœåŠ¡å™¨ |
| åŸŸå | Â¥0 | ä½¿ç”¨å·²æœ‰åŸŸå |
| HTTPS è¯ä¹¦ | Â¥0 | Let's Encrypt å…è´¹ |
| CDN(å¯é€‰) | Â¥50-100/æœˆ | å›¾ç‰‡åŠ é€Ÿ, å¯é€‰ |
| **å°è®¡** | **Â¥0-100/æœˆ** | |

#### ç»“è®º

```
å¼€å‘æˆæœ¬: Â¥0 (ä½¿ç”¨ç°æœ‰èµ„æº)
è¿è¥æˆæœ¬: Â¥0-100/æœˆ (å–å†³äºæ˜¯å¦ä½¿ç”¨CDN)
```

**ä¸å°ç¨‹åºå¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | å¼€å‘æˆæœ¬ | å®¡æ ¸æˆæœ¬ | å‘å¸ƒæˆæœ¬ | ç»´æŠ¤æˆæœ¬ |
|------|---------|---------|---------|---------|
| å“åº”å¼+PWA | Â¥0 | Â¥0 | Â¥0 | ä½ |
| å¾®ä¿¡å°ç¨‹åº | é«˜(éœ€é‡å†™) | Â¥0 | Â¥300/å¹´ | ä¸­ |
| å¤šå°ç¨‹åº | æé«˜ | Â¥0 | Â¥300Ã—N/å¹´ | é«˜ |

---

## åã€é£é™©ä¸åº”å¯¹

### 10.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| iOS Safari PWAæ”¯æŒæœ‰é™ | é«˜ | ä¸­ | é™çº§åˆ°å“åº”å¼Web, æä¾›æ¸…æ™°æŒ‡å¼• |
| Androidæµè§ˆå™¨å…¼å®¹æ€§ | ä¸­ | ä¸­ | ä½¿ç”¨Polyfill, å¹¿æ³›æµ‹è¯• |
| Service Workerç¼“å­˜é—®é¢˜ | ä¸­ | ä½ | æä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®, ç‰ˆæœ¬æ£€æµ‹ |
| çœŸæœºæµ‹è¯•è¦†ç›–ä¸è¶³ | ä¸­ | ä¸­ | ä½¿ç”¨BrowserStack, å€Ÿç”¨è®¾å¤‡ |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä½ | é«˜ | æ€§èƒ½ç›‘æ§, åŠæ—¶ä¼˜åŒ– |

### 10.2 ç”¨æˆ·ä½“éªŒé£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•å®‰è£…PWA | é«˜ | é«˜ | æ˜ç¡®çš„å®‰è£…å¼•å¯¼, å›ºå®šä½ç½®æç¤º |
| ç¦»çº¿åŠŸèƒ½ä¸å¯ç”¨ | ä¸­ | ä¸­ | ç¦»çº¿æç¤º, ç½‘ç»œçŠ¶æ€æ£€æµ‹ |
| ç§»åŠ¨ç«¯æ“ä½œä¸ç›´è§‚ | ä¸­ | ä¸­ | ç”¨æˆ·æµ‹è¯•, è¿­ä»£ä¼˜åŒ– |
| åŠ è½½é€Ÿåº¦æ…¢ | ä½ | é«˜ | æ€§èƒ½ä¼˜åŒ–, éª¨æ¶å± |

### 10.3 ä¸šåŠ¡é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| å°ç¨‹åºç”¨æˆ·æ— æ³•è®¿é—® | é«˜(å¦‚æœåªåšPWA) | é«˜ | åŒæ—¶æä¾›å“åº”å¼Web, æ— éœ€å®‰è£… |
| éœ€è¦å¾®ä¿¡ç¤¾äº¤åˆ†äº« | ä¸­ | ä¸­ | é›†æˆå¾®ä¿¡JSSDK, æä¾›åˆ†äº«åŠŸèƒ½ |
| å‡ºæµ·å›°éš¾ | ä½ | ä½ | PWAå¤©ç„¶æ”¯æŒå‡ºæµ· |

### 10.4 åº”å¯¹ç­–ç•¥

#### é™çº§ç­–ç•¥

```typescript
// PWA é™çº§åˆ°å“åº”å¼ Web
if ('serviceWorker' in navigator) {
  // æ”¯æŒ PWA
  registerServiceWorker()
} else {
  // é™çº§åˆ°æ™®é€š Web
  console.log('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒPWA')
}

// è§¦æ‘¸äº‹ä»¶é™çº§
const events = 'ontouchstart' in window
  ? { start: 'touchstart', move: 'touchmove', end: 'touchend' }
  : { start: 'mousedown', move: 'mousemove', end: 'mouseup' }

// å›¾ç‰‡æ ¼å¼é™çº§
<img
  src={supportsWebP ? image.webp : image.jpg}
  onError={(e) => {
    // WebP åŠ è½½å¤±è´¥, é™çº§åˆ° JPEG
    e.target.src = image.jpg
  }}
/>
```

#### ç”¨æˆ·æ•™è‚²

```typescript
// å®‰è£…æç¤ºç»„ä»¶
export const InstallGuide = () => {
  const [isIOS, setIsIOS] = useState(false)
  const [isAndroid, setIsAndroid] = useState(false)

  useEffect(() => {
    const ua = navigator.userAgent
    setIsIOS(/iPad|iPhone|iPod/.test(ua))
    setIsAndroid(/Android/.test(ua))
  }, [])

  if (isIOS) {
    return (
      <Modal title="æ·»åŠ åˆ°ä¸»å±å¹•">
        <ol>
          <li>ç‚¹å‡»åº•éƒ¨çš„åˆ†äº«æŒ‰é’® <IconShare /></li>
          <li>é€‰æ‹©"æ·»åŠ åˆ°ä¸»å±å¹•"</li>
          <li>ç‚¹å‡»"æ·»åŠ "æŒ‰é’®</li>
        </ol>
        <img src="/guide/ios-install.gif" alt="iOSå®‰è£…æŒ‡å—" />
      </Modal>
    )
  }

  if (isAndroid) {
    return (
      <Modal title="å®‰è£…åº”ç”¨">
        <ol>
          <li>ç‚¹å‡»æµè§ˆå™¨èœå• <IconMenu /></li>
          <li>é€‰æ‹©"å®‰è£…åº”ç”¨"æˆ–"æ·»åŠ åˆ°ä¸»å±å¹•"</li>
          <li>ç‚¹å‡»"å®‰è£…"æŒ‰é’®</li>
        </ol>
        <img src="/guide/android-install.gif" alt="Androidå®‰è£…æŒ‡å—" />
      </Modal>
    )
  }

  return null
}
```

---

## åä¸€ã€æ€»ç»“ä¸å»ºè®®

### 11.1 æ ¸å¿ƒå»ºè®®

åŸºäºPlant-DTPé¡¹ç›®ç°çŠ¶å’Œ2025å¹´æŠ€æœ¯è¶‹åŠ¿ï¼Œæˆ‘ä»¬ç»™å‡ºä»¥ä¸‹å»ºè®®ï¼š

#### âœ… çŸ­æœŸæ–¹æ¡ˆ (1-2ä¸ªæœˆ)
```
1. ä¼˜å…ˆå®ç°å“åº”å¼ Web App
   - å¼€å‘å‘¨æœŸ: 10å¤©
   - æˆæœ¬: Â¥0
   - æ•ˆæœ: ç«‹å³è¦†ç›–æ‰€æœ‰ç§»åŠ¨è®¾å¤‡

2. é€æ­¥æ·»åŠ  PWA èƒ½åŠ›
   - å¼€å‘å‘¨æœŸ: 5.5å¤©
   - æˆæœ¬: Â¥0
   - æ•ˆæœ: æå‡ç”¨æˆ·ä½“éªŒ, æ¥è¿‘åŸç”Ÿ
```

#### ğŸ“‹ ä¸­æœŸè¯„ä¼° (3-6ä¸ªæœˆå)
```
è¯„ä¼°æ˜¯å¦éœ€è¦å¼€å‘å°ç¨‹åº:
- å¦‚æœå¾®ä¿¡ç”Ÿæ€æµé‡é‡è¦ â†’ å¼€å‘å°ç¨‹åº
- å¦‚æœä¸»è¦é SEOå’Œç›´æ¥è®¿é—® â†’ ç»§ç»­ä¼˜åŒ– PWA
```

#### ğŸ¯ å…³é”®æˆåŠŸå› ç´ 
```
1. ç§»åŠ¨ä¼˜å…ˆè®¾è®¡æ€ç»´
2. æ€§èƒ½ä¼˜åŒ–è´¯ç©¿å§‹ç»ˆ
3. å……åˆ†çš„çœŸæœºæµ‹è¯•
4. ç”¨æˆ·åé¦ˆå¿«é€Ÿè¿­ä»£
5. é™çº§ç­–ç•¥ç¡®ä¿å…¼å®¹æ€§
```

### 11.2 ä¸ç°æœ‰å°ç¨‹åºè§„åˆ’çš„å…³ç³»

é¡¹ç›®ä¸­å·²æœ‰ `09-å¾®ä¿¡å°ç¨‹åºé›†æˆè§„åˆ’.md`ï¼Œå»ºè®®ï¼š

```typescript
// æ–¹æ¡ˆA: ä¼˜å…ˆçº§æ’åº
P0 (ç«‹å³æ‰§è¡Œ):  å“åº”å¼ Web App
P1 (1-2ä¸ªæœˆ):   PWA å‡çº§
P2 (è¯„ä¼°å):    å¾®ä¿¡å°ç¨‹åº(å¦‚æœéœ€è¦)

// æ–¹æ¡ˆB: å¹¶è¡Œå¼€å‘
åŒæ—¶ç»´æŠ¤ä¸¤ä¸ªç‰ˆæœ¬:
- Web App (PWA): é€šç”¨å¹³å°
- å¾®ä¿¡å°ç¨‹åº: å›½å†…æµé‡å…¥å£

ä½†è€ƒè™‘åˆ°æˆæœ¬, å»ºè®®å…ˆå®Œæˆæ–¹æ¡ˆA
```

### 11.3 è¡ŒåŠ¨è®¡åˆ’

#### Week 1-2: å“åº”å¼åŸºç¡€
- [ ] é…ç½®å“åº”å¼æ–­ç‚¹ç³»ç»Ÿ
- [ ] MainLayout ç§»åŠ¨ç«¯é€‚é…
- [ ] Dashboard å“åº”å¼å¸ƒå±€

#### Week 3-4: æ ¸å¿ƒé¡µé¢
- [ ] Plants åˆ—è¡¨å“åº”å¼
- [ ] Tasks åˆ—è¡¨å“åº”å¼
- [ ] Rooms åˆ—è¡¨å“åº”å¼

#### Week 5: è§¦æ‘¸äº¤äº’
- [ ] ä¸‹æ‹‰åˆ·æ–°
- [ ] ä¾§æ»‘æ“ä½œ
- [ ] æ‰‹åŠ¿ä¼˜åŒ–

#### Week 6-7: PWA å‡çº§
- [ ] Vite PWA é…ç½®
- [ ] Service Worker ç¼“å­˜
- [ ] ç¦»çº¿åŠŸèƒ½
- [ ] å®‰è£…å¼•å¯¼

#### Week 8: æµ‹è¯•ä¸ä¼˜åŒ–
- [ ] å¤šè®¾å¤‡çœŸæœºæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] Bugä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°

### 11.4 æˆåŠŸæŒ‡æ ‡

```typescript
// Core Web Vitals ç›®æ ‡
const performanceTargets = {
  LCP: '< 2.5s',  // Largest Contentful Paint
  FID: '< 100ms', // First Input Delay
  CLS: '< 0.1',   // Cumulative Layout Shift
  FCP: '< 1.8s',  // First Contentful Paint
  TTI: '< 3.8s',  // Time to Interactive
}

// ç”¨æˆ·å‚ä¸åº¦ç›®æ ‡
const engagementTargets = {
  ç§»åŠ¨ç«¯è®¿é—®å æ¯”: '> 50%',
  PWA å®‰è£…ç‡: '> 10%',
  ç¦»çº¿ä½¿ç”¨ç‡: '> 5%',
  å›è®¿ç‡: '> 30%',
}

// æ€§èƒ½ç›®æ ‡
const technicalTargets = {
  é¦–å±åŠ è½½æ—¶é—´: '< 3s',
  äº¤äº’å“åº”æ—¶é—´: '< 100ms',
  é¡µé¢å¤§å°: '< 500KB (gzipped)',
  Lighthouse æ€§èƒ½è¯„åˆ†: '> 90',
}
```

---

## åäºŒã€å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£
- [PWA å®˜æ–¹æ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps)
- [Vite PWA æ’ä»¶](https://vite-pwa-plugin.netlify.app/)
- [TailwindCSS å“åº”å¼è®¾è®¡](https://tailwindcss.com/docs/responsive-design)
- [React æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)

### æŠ€æœ¯æ–‡ç« 
- [2025å¹´ç§»åŠ¨ç«¯å¼€å‘æ€§èƒ½ä¼˜åŒ–å®è·µä¸è¶‹åŠ¿åˆ†æ](https://blog.csdn.net/JafarOne/article/details/146469093)
- [PWA vs å°ç¨‹åºå¯¹æ¯”åˆ†æ](https://juejin.cn/post/7550503222684631059)
- [ç§»åŠ¨ä¼˜å…ˆè®¾è®¡æ ¸å¿ƒç­–ç•¥](https://stripe.com/zh-sg/resources/more/mobile-optimization)

### å·¥å…·èµ„æº
- [å†…ç½‘ç©¿é€ - NATAPP](https://natapp.cn/)
- [PWA å›¾æ ‡ç”Ÿæˆå™¨](https://realfavicongenerator.net/)
- [BrowserStack çœŸæœºæµ‹è¯•](https://www.browserstack.com/)

---

**æ–‡æ¡£æ›´æ–°è®°å½•ï¼š**

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|---------|
| v1.0 | 2026-01-29 | Plant-DTP Team | åˆå§‹ç‰ˆæœ¬, å®Œæ•´çš„ç§»åŠ¨ç«¯å¼€å‘è§„åˆ’ |

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š**

1. âœ… è¯„å®¡æœ¬æ–‡æ¡£, ç¡®è®¤æŠ€æœ¯é€‰å‹
2. âœ… åˆ›å»º `feature/mobile` åˆ†æ”¯
3. âœ… å¼€å§‹å“åº”å¼é€‚é…å·¥ä½œ
4. âœ… æ¯å‘¨åŒæ­¥è¿›åº¦, åŠæ—¶è°ƒæ•´è®¡åˆ’
