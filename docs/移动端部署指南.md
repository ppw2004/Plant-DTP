# Plant-DTP ç§»åŠ¨ç«¯éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. å®‰è£…ç§»åŠ¨ç«¯ä¾èµ–

```bash
# åœ¨å‰ç«¯æœåŠ¡å™¨ä¸Š
cd frontend
npm install antd-mobile
```

### 2. ä»£ç æ–‡ä»¶æ¸…å•

ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å·²åˆ›å»ºï¼š

```
frontend/src/
â”œâ”€â”€ layouts/
â”‚   â”œâ”€â”€ DesktopLayout.tsx          âœ… å·²åˆ›å»º
â”‚   â””â”€â”€ MobileLayout.tsx           âœ… å·²åˆ›å»º
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ desktop/                   âœ… å·²å¤åˆ¶
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Plants.tsx
â”‚   â”‚   â”œâ”€â”€ Rooms.tsx
â”‚   â”‚   â”œâ”€â”€ Tasks.tsx
â”‚   â”‚   â”œâ”€â”€ ArchivedPlants.tsx
â”‚   â”‚   â””â”€â”€ Suggestions.tsx
â”‚   â”‚
â”‚   â””â”€â”€ mobile/                    âœ… å·²åˆ›å»º
â”‚       â”œâ”€â”€ MobileDashboard.tsx
â”‚       â”œâ”€â”€ MobilePlants.tsx
â”‚       â”œâ”€â”€ MobileRooms.tsx
â”‚       â””â”€â”€ MobileTasks.tsx
â”‚
â””â”€â”€ components/
    â””â”€â”€ mobile/                    âœ… å·²åˆ›å»º
        â”œâ”€â”€ MobilePlantCard.tsx
        â””â”€â”€ MobileTaskList.tsx
```

---

## ğŸš€ å¯ç”¨ç§»åŠ¨ç«¯çš„æ­¥éª¤

### Step 1: ä¿®æ”¹ App.tsx

ç¼–è¾‘ `frontend/src/App.tsx`ï¼Œå–æ¶ˆç§»åŠ¨ç«¯ç›¸å…³ä»£ç çš„æ³¨é‡Šï¼š

```typescript
// å–æ¶ˆè¿™äº›è¡Œçš„æ³¨é‡Šï¼š
// import MobileLayout from './layouts/MobileLayout'
// import MobileDashboard from './pages/mobile/MobileDashboard'
// import MobilePlants from './pages/mobile/MobilePlants'
// import MobileRooms from './pages/mobile/MobileRooms'
// import MobileTasks from './pages/mobile/MobileTasks'

// ä»¥åŠç§»åŠ¨ç«¯è·¯ç”±éƒ¨åˆ†ï¼š
/*
<Route path="/mobile" element={<MobileLayout />}>
  ...
</Route>
*/
```

å®Œæ•´çš„å¯ç”¨ä»£ç è§ `App.example.tsx`ï¼ˆå·²æä¾›ï¼‰

### Step 2: æ„å»ºå‰ç«¯

```bash
cd frontend
npm run build
```

### Step 3: éƒ¨ç½²åˆ°æœåŠ¡å™¨

```bash
# æ–¹æ³•1: ä½¿ç”¨ rsync
rsync -avz --delete dist/ user@82.156.213.38:/var/www/plant-dtp/frontend/dist/

# æ–¹æ³•2: ä½¿ç”¨ scp
scp -r dist/* user@82.156.213.38:/var/www/plant-dtp/frontend/dist/

# æ–¹æ³•3: åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥æ„å»º
# å°†æ•´ä¸ª frontend ç›®å½•ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç„¶åï¼š
cd /path/to/frontend
npm install
npm run build
```

### Step 4: é‡å¯ Nginxï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
# åœ¨å‰ç«¯æœåŠ¡å™¨ä¸Š
sudo nginx -t              # æµ‹è¯•é…ç½®
sudo systemctl reload nginx
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

### æ¡Œé¢ç‰ˆéªŒè¯

```bash
# è®¿é—®ä»¥ä¸‹URLï¼Œåº”è¯¥çœ‹åˆ°æ¡Œé¢ç‰ˆå¸ƒå±€ï¼ˆä¾§è¾¹æ ï¼‰
http://82.156.213.38/
http://82.156.213.38/dashboard
http://82.156.213.38/plants
```

### ç§»åŠ¨ç«¯éªŒè¯

```bash
# è®¿é—®ä»¥ä¸‹URLï¼Œåº”è¯¥çœ‹åˆ°ç§»åŠ¨ç«¯å¸ƒå±€ï¼ˆåº•éƒ¨TabBarï¼‰
http://82.156.213.38/mobile
http://82.156.213.38/mobile/plants
http://82.156.213.38/mobile/rooms
http://82.156.213.38/mobile/tasks
```

### æ‰‹æœºçœŸæœºæµ‹è¯•

```bash
1. ç”¨æ‰‹æœºæµè§ˆå™¨è®¿é—®: http://82.156.213.38/mobile
2. åº”è¯¥çœ‹åˆ°ï¼š
   - åº•éƒ¨æœ‰4ä¸ªTabï¼ˆé¦–é¡µã€æ¤ç‰©ã€æˆ¿é—´ã€ä»»åŠ¡ï¼‰
   - ç‚¹å‡»Tabå¯ä»¥åˆ‡æ¢é¡µé¢
   - å¡ç‰‡å¸ƒå±€é€‚åˆæ‰‹æœºå±å¹•
```

---

## âš™ï¸ Nginxé…ç½®ï¼ˆå·²é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ï¼‰

ç°æœ‰çš„ Nginx é…ç½®å·²ç»æ”¯æŒ SPA è·¯ç”±ï¼Œæ— éœ€ä¿®æ”¹ï¼š

```nginx
location / {
    root /var/www/plant-dtp/frontend/dist;
    try_files $uri $uri/ /index.html;
}
```

è¿™ä¸ªé…ç½®ç¡®ä¿ï¼š
- âœ… è®¿é—® `/` è¿”å›æ¡Œé¢ç‰ˆ
- âœ… è®¿é—® `/mobile` è¿”å›ç§»åŠ¨ç«¯
- âœ… åˆ·æ–°é¡µé¢ä¸ä¼š404
- âœ… React Router æ­£ç¡®å¤„ç†æ‰€æœ‰è·¯ç”±

---

## ğŸ“± è®¿é—®æ–¹å¼æ€»ç»“

### æ¡Œé¢ç‰ˆ
```
http://82.156.213.38/           â†’ ä»ªè¡¨ç›˜
http://82.156.213.38/plants     â†’ æ¤ç‰©åˆ—è¡¨
http://82.156.213.38/rooms      â†’ æˆ¿é—´åˆ—è¡¨
http://82.156.213.38/tasks      â†’ ä»»åŠ¡åˆ—è¡¨
```

### ç§»åŠ¨ç«¯
```
http://82.156.213.38/mobile                â†’ ç§»åŠ¨ç«¯é¦–é¡µ
http://82.156.213.38/mobile/plants         â†’ æ¤ç‰©åˆ—è¡¨ï¼ˆç§»åŠ¨ç‰ˆï¼‰
http://82.156.213.38/mobile/rooms          â†’ æˆ¿é—´åˆ—è¡¨ï¼ˆç§»åŠ¨ç‰ˆï¼‰
http://82.156.213.38/mobile/tasks          â†’ ä»»åŠ¡åˆ—è¡¨ï¼ˆç§»åŠ¨ç‰ˆï¼‰
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: è®¿é—® /mobile æ˜¾ç¤ºæ¡Œé¢ç‰ˆï¼Ÿ

**åŸå› :** ç§»åŠ¨ç«¯è·¯ç”±æœªå¯ç”¨

**è§£å†³:** æ£€æŸ¥ `App.tsx` ä¸­ç§»åŠ¨ç«¯è·¯ç”±æ˜¯å¦å–æ¶ˆæ³¨é‡Š

### Q2: åˆ·æ–° /mobile/plants æ˜¾ç¤º404ï¼Ÿ

**åŸå› :** Nginxé…ç½®é—®é¢˜

**è§£å†³:** ç¡®ä¿ `try_files $uri $uri/ /index.html;` é…ç½®æ­£ç¡®

### Q3: antd-mobile æŠ¥é”™ï¼Ÿ

**åŸå› :** ä¾èµ–æœªå®‰è£…

**è§£å†³:**
```bash
cd frontend
npm install antd-mobile
npm run build
```

### Q4: ç§»åŠ¨ç«¯æ ·å¼ä¸å¯¹ï¼Ÿ

**åŸå› :** å¯èƒ½æ˜¯ç¼“å­˜é—®é¢˜

**è§£å†³:**
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. å¼ºåˆ¶åˆ·æ–° (Ctrl+F5)
3. æ£€æŸ¥ç§»åŠ¨ç«¯ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥

### Q5: å¦‚ä½•å›é€€åˆ°æ¡Œé¢ç‰ˆï¼Ÿ

**è§£å†³:** æš‚æ—¶æ³¨é‡Šæ‰ç§»åŠ¨ç«¯è·¯ç”±ï¼Œé‡æ–°æ„å»ºï¼š
```typescript
// App.tsx
{/*
<Route path="/mobile" element={<MobileLayout />}>
  ...
</Route>
*/}
```

---

## ğŸ“Š å½“å‰éƒ¨ç½²çŠ¶æ€

### âœ… å·²å®Œæˆ
- [x] åˆ›å»ºç›®å½•ç»“æ„
- [x] å¤åˆ¶æ¡Œé¢ç‰ˆé¡µé¢åˆ° desktop/
- [x] åˆ›å»ºç§»åŠ¨ç«¯å¸ƒå±€ (MobileLayout)
- [x] åˆ›å»ºç§»åŠ¨ç«¯é¡µé¢ (MobileDashboard, MobilePlants, MobileRooms, MobileTasks)
- [x] åˆ›å»ºç§»åŠ¨ç«¯ç»„ä»¶ (MobilePlantCard, MobileTaskList)
- [x] æ›´æ–° App.tsxï¼ˆç§»åŠ¨ç«¯ä»£ç å·²æ³¨é‡Šï¼‰

### â³ å¾…å®Œæˆï¼ˆéƒ¨ç½²æ—¶ï¼‰
- [ ] å®‰è£… antd-mobile
- [ ] å–æ¶ˆ App.tsx ä¸­ç§»åŠ¨ç«¯ä»£ç çš„æ³¨é‡Š
- [ ] æ„å»ºå‰ç«¯ (npm run build)
- [ ] éƒ¨ç½²åˆ°æœåŠ¡å™¨
- [ ] éªŒè¯åŠŸèƒ½

---

## ğŸ¯ å¿«é€Ÿå¯ç”¨ç§»åŠ¨ç«¯å‘½ä»¤

```bash
# 1. SSHåˆ°å‰ç«¯æœåŠ¡å™¨
ssh user@82.156.213.38

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/Plant-DTP/frontend

# 3. å®‰è£…ä¾èµ–
npm install antd-mobile

# 4. ç¼–è¾‘ App.tsxï¼Œå–æ¶ˆç§»åŠ¨ç«¯ä»£ç æ³¨é‡Š
# (ä½¿ç”¨ vi æˆ– nano ç¼–è¾‘)

# 5. æ„å»º
npm run build

# 6. éƒ¨ç½²ï¼ˆå¦‚æœéœ€è¦ï¼‰
# rsync -avz dist/* /var/www/plant-dtp/frontend/dist/

# 7. éªŒè¯
curl http://localhost/mobile
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼ŒæŸ¥çœ‹ï¼š
1. å®Œæ•´å®æ–½æŒ‡å—: `docs/15-ç§»åŠ¨ç«¯ç‹¬ç«‹ç‰ˆæœ¬å®æ–½æŒ‡å—.md`
2. å¿«é€Ÿå¼€å§‹: `docs/ç§»åŠ¨ç«¯å¿«é€Ÿå¼€å§‹.md`
3. ç¤ºä¾‹ä»£ç : `frontend/src/App.example.tsx`

---

**éƒ¨ç½²ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¥æœŸ**: 2026-01-29
**ç»´æŠ¤è€…**: Plant-DTP Team
